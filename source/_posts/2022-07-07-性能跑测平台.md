---
title: 性能跑测平台
tags: Work Tools

---
## 项目简记

使用项目：《明日之后》

2022年4月 - 2022年6月

- 前端: vue2 + element-ui + echarts.js
- 后端: python + flask
- 数据库: mysql

框架完成，但实际上属于成品，关键部分数据没到位，无法进行数据分析，非常可惜，蓝图比较美好~

## 解决问题

性能问题一直是心腹大患，既要美术资源炫酷（细节拉满，特效拉满），又要能流畅运行（高端机60fps, 中低端机30fps），还要适配多种机型（上不封顶，下沉小米5，iphone 6）

对于这么多要求，不光是美术做LOD，策划场景搭建，程序脚本逻辑以及TA的各种渲染，引擎端对于性能的各种优化和负优化，每次完成都需要对性能进行一次测试然后反馈调优，每次老流程工作量都巨大，人力也不够，经常需要mtl人力跑查，成本高昂。

因此主要考虑2个方面的工作：

1. 自动化跑测并收集性能数据

> 只需要人工配置一次跳点参数，后续自动跑测，自动收集数据

2. 处理数据并分析

> 将收集来的数据进行处理，分析，然后生成报告，方便后续优化


## 实际方案 

自己开发完成的一套模块化系统

整体框架搭建完成，热力图接入并适配多个地图，基础功能完成：成员管理，open_id系统，pysvn和diff相关模块，相关数据处理

### 需求确定

<!-- <img src="images/logo/Auto_preformance-需求确定.drawio.png"/> -->
![Alt 需求确定](/images/Auto_preformance-需求确定.drawio.png)

### 简单逻辑

![image](/images/Auto_preformance-跑测分析.drawio.png "image")

### 流程图

![Alt 流程图](/images/Auto_preformance-全流程图.drawio.png)

### 原型图 （部分）

![Alt 流程图](/images/Auto_preformance-原型图.drawio.png)

### 数据库（部分）

![Alt 流程图](/images/Auto_preformance-database.drawio.png)

## 最终效果

前期用了一两次，效果还行，但是后面由于版本内容太忙，性能组组长手上负责内容一致延期，导致后续开发工作无法进行，可惜了。。。

缺失内容： Unit test 跑测结果实际数据收集和解析，跑测过程中render_doc, profiling, airperf等工具检查结果数据收集和解析, 这里由于需要代码权限（当时开发的时候没有），也无法协助其完成对应工作。

但给组内留下了一个拓展性非常好的前后端框架，最简单的模块化，已经接入了各种基础系统，后续只要开发对应模块或者换皮即可，比组内原有的django2的框架要好一些，适合多人开发和调试。
