<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-Hans"><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" hreflang="zh-Hans" /><updated>2023-05-07T21:04:25+08:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Frozzen’s Blog</title><subtitle>非常欢迎您浏览我的网站！非常希望能与您积极交流。在这里，您可以找到许多有趣的内容，希望您能喜欢并与我分享您的想法!
</subtitle><author><name>FrozzenCJ</name><email>joeychou0805@gmail.com</email></author><entry><title type="html">游戏设计的客观认识</title><link href="http://localhost:4000/2023/05/02/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%AE%A2%E8%A7%82%E8%AE%A4%E8%AF%86.html" rel="alternate" type="text/html" title="游戏设计的客观认识" /><published>2023-05-02T00:00:00+08:00</published><updated>2023-05-02T00:00:00+08:00</updated><id>http://localhost:4000/2023/05/02/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%AE%A2%E8%A7%82%E8%AE%A4%E8%AF%86</id><content type="html" xml:base="http://localhost:4000/2023/05/02/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%AE%A2%E8%A7%82%E8%AE%A4%E8%AF%86.html"><![CDATA[<blockquote>
  <p>抽象一些理论方法来分析游戏设计，以及游戏设计的客观认识</p>
</blockquote>

<h2 id="理论分析">理论分析</h2>

<h3 id="不可能三角形原则">不可能三角形原则</h3>

<p>蒙代尔的不可能三角形原则：</p>
<ul>
  <li>两项容易导致极端化</li>
  <li>四项去两项维度和三角形类似，四项去一项，分主次思维成本增加，3！=6次组合</li>
</ul>

<p>简洁高效的思维，拓展性良好，太简单的模型可用性差，太复杂的模型复用性差，在此中间获得平衡，设计就是简单-&gt;复杂-&gt;抽象简单的过程（学习，工作等方方面面都是）。</p>

<p>例如，对于产品来说，成本-性能-可靠性 三个维度去考虑，一个有趣的路径： 互联网往往通过不计成本的方式，用高性能和高可靠性吸引专业化(目标)用户；然后产品稳定后，拓展渠道，降低成本，逐渐在性能和可靠性的平衡中，不断向低成本靠近，拓宽用户范围。</p>

<p>按照此原则，初始游戏应首先考虑生存问题，应在 成本-可玩性-画风 上做出平衡。成本主要指2d/3d的资源，人员开发成本，其最低成本就是人员（单位成本X时间=实际成本），人心齐聚代价会低很多。可玩性的最低就是某类固定爱好玩家，比如米氏二次元就有些固定玩家，总有喜欢某些品类的玩家。画风最低就是吸引玩家来体验的意愿程度，像素风，卡通风格（有趣），真实风等, 当然，越精致成本越高。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.  卡通风格：使用简化的线条和明亮的色彩，突出游戏的趣味性和轻松感。
    
2.  真实主义风格：力求在游戏中还原真实的场景和人物形象，通常使用高质量的纹理和细节。
    
3.  手绘风格：仿佛手工绘制的效果，注重线条和色彩的表现力和艺术感染力。
    
4.  像素风格：使用像素化的图形和局限的色彩，重现早期电子游戏的风格和情怀。
    
5.  立体主义风格：通过立体化和抽象化的手法来表现游戏世界，突出其科幻或幻想的特点。
    
6.  欧美风格：通常注重写实和细节的表现，也较为严肃和成熟。
    
7.  东方风格：强调线条、色彩和符号的表现力，通常具有浓郁的文化氛围和情感色彩。
    
8.  恐怖风格：注重调节游戏气氛和心理效果，通过黑暗、血腥和恐怖的元素来吸引玩家注意。

</code></pre></div></div>

<p>吸引之后就是留存，和找plmm类似，始于颜值，终于灵魂，那就是可玩性，也是核心所在，比如《通神榜》中 吸血鬼幸存者+土豆兄弟的玩法， 武器系统是两者的结合，充满了随机的趣味性。
而平滑的成长-刷怪机制，比土豆兄弟要爽，成型后薄纱各种敌人的快感也是让人流连忘返的关键点。当然，里面有些设计漏洞可能会加强短期体验-降低整体寿命，比如抛瓦刷灵力转刀剑，吸血+高伤，基本能站撸，但不在前期考虑范畴。</p>

<p>如果天时地利人和，初期取得一定的成功，中期就要有稳定的制造业流程，罐头游戏只是一个分支，另一个是抽象出关键的流程和制作思路（框架），在现有的基础上能够快速做出不同品类，例如《原神》- 《星穹》（画风和用户信息界面GUI等有非常近似的渲染管线）</p>

<p>参考米哈游的工作管线，以先单机后联机的方案考虑（当然前期需要定好，不然网络部分迭代起来会比较麻烦），主设计-框架-开发-设计-开发- 这个流程</p>

<h2 id="马尔科夫链">马尔科夫链</h2>

<p>ChatGPT 3.5 给的回答：
马尔科夫链在游戏中有多种应用，其中包括：</p>

<ol>
  <li>游戏AI：利用马尔科夫链模型来构建游戏AI，使其能够根据当前状态和可能的转移情况做出最优决策。</li>
  <li>游戏设计：通过构建马尔科夫链模型来预测玩家的行为和游戏进程，从而优化游戏设计和玩法。</li>
  <li>网络游戏：使用马尔科夫链模型来预测玩家的在线时间和游戏偏好，从而提供个性化的游戏体验。</li>
  <li>游戏平衡：通过分析游戏中的各种状态和转移情况，构建马尔科夫链模型来评估游戏的平衡性和公正性，从而进行相应的调整和优化。</li>
</ol>

<p>马尔科夫链（Markov Chain）是一种随机过程，它具有“无记忆性”，即下一状态的概率仅取决于当前状态，而与过去的状态无关。在游戏开发中，马尔科夫链可以用于实现各种基于概率的系统，例如随机地图生成、NPC行为模拟、游戏故事生成等。</p>

<p>创造性GPT4给的回答：</p>

<p>以下是马尔科夫链在游戏中的一些具体应用：</p>

<ol>
  <li>
    <p>随机地图生成：在游戏中，利用马尔科夫链可以生成具有一定规律性的随机地图。例如，在一个战略游戏中，不同类型的地形可以看作是马尔科夫链的状态，通过预先定义各种地形之间的转移概率，我们可以生成具有一定规律性的随机地图。</p>
  </li>
  <li>
    <p>NPC行为模拟：马尔科夫链可以用来模拟具有简单行为逻辑的NPC。通过为NPC设定一系列行为状态和相应的状态转移概率，例如：行走、站立、攻击等，可以实现NPC在不同状态之间的随机切换，从而使其表现出较为真实的行为。</p>
  </li>
  <li>
    <p>游戏故事生成：利用马尔科夫链可以生成具有一定连贯性的游戏故事。通过为游戏设定一系列情节节点和相应的状态转移概率，可以让游戏故事在不同情节之间自然地转换，从而提高游戏的可玩性和故事的丰富度。</p>
  </li>
  <li>
    <p>随机事件生成：在很多游戏中，随机事件是增强游戏趣味的重要元素。通过马尔科夫链，我们可以为游戏设定一系列随机事件和相应的状态转移概率，使事件的发生和转换具有一定的规律性，从而让玩家在游戏过程中遇到更多有趣的挑战。</p>
  </li>
  <li>
    <p>概率平衡设计：在游戏中，某些资源、技能或物品的获取往往需要一定的随机性。利用马尔科夫链可以对这些元素的获取进行概率平衡设计，从而确保游戏的公平性和可玩性。</p>
  </li>
</ol>

<p>总之，马尔科夫链在游戏中的应用颇为广泛，它可以用于实现各种基于概率的系统，提高游戏的趣味性、真实感和可玩性。</p>

<h3 id="应用">应用</h3>

<h4 id="1-随机地图生成">1. 随机地图生成</h4>

<p>在随机地图生成中应用马尔科夫链，主要是通过定义地形之间的状态转移概率来生成具有一定规律性的随机地图。以下是一个简单的步骤说明：</p>

<ol>
  <li>
    <p>首先，确定地形类型。在游戏中，可能有多种类型的地形，如草地、沙漠、山地、森林等。这些地形类型将作为马尔科夫链的状态。</p>
  </li>
  <li>
    <p>其次，定义状态转移概率矩阵。状态转移概率矩阵是一个二维数组，其行和列分别代表不同的地形状态，矩阵中的元素表示从一个状态转换到另一个状态的概率。例如，从草地转移到沙漠的概率可能较低，而从草地转移到森林的概率较高。通过定义这个矩阵，我们可以控制生成地图中不同地形之间的相互关系。</p>
  </li>
  <li>
    <p>初始化地图。创建一个二维数组来表示地图的网格，每个网格对应一个地形状态。可以从一个随机或预先设定的初始状态开始生成地图。</p>
  </li>
  <li>
    <p>根据状态转移概率矩阵生成地图。遍历地图的每个网格，基于当前网格的地形状态和状态转移概率矩阵，随机选择下一个地形状态。可以采用不同的遍历方式，如从左到右、从上到下、螺旋式等。对于每个网格，根据其相邻网格的地形状态和转移概率矩阵来更新其地形状态。</p>
  </li>
  <li>
    <p>根据需要优化地图。生成的地图可能需要进行一些优化，如确保地图的连通性、平衡各种地形的分布比例等。可以通过一些后处理算法来实现这些优化目标。</p>
  </li>
  <li>
    <p>渲染地图。根据生成的地图网格及其地形状态，将地图渲染到游戏画面上。通常，需要为不同地形状态设计相应的美术素材（如不同类型的地面纹理），以提高地图的视觉效果。</p>
  </li>
</ol>

<p>通过以上步骤，我们可以利用马尔科夫链生成具有一定规律性的随机地图。这种方法的优点在于可以在保证地图随机性的同时控制地形之间的相互关系，使生成的地图更具有真实感和可玩性。同时，通过调整状态转移概率矩阵，可以轻松实现不同风格的地图生成。</p>

<h4 id="2npc行为模拟">2.NPC行为模拟</h4>

<p>假设有一个游戏中的NPC，其状态可分为三种：巡逻、攻击和逃跑。其中，巡逻状态下NPC有50%的概率继续巡逻，30%的概率转变为攻击状态，20%的概率转变为逃跑状态；攻击状态下NPC有70%的概率继续攻击，20%的概率转变为逃跑状态，10%的概率转变为巡逻状态；逃跑状态下NPC有80%的概率继续逃跑，20%的概率转变为巡逻状态。在马尔科夫链收敛后，各个状态的概率分布趋于稳定，称为平稳分布或稳态分布。在稳态分布下，各个状态的概率表示为πi，表示在长时间运行后，系统处于状态i的概率。在游戏NPC行为模拟中，各个行为的概率取决于NPC状态转移矩阵和NPC的初始状态。如果NPC状态转移矩阵满足细致平稳条件，那么稳态分布可以通过转移矩阵的特征向量计算得出。具体而言，稳态分布π满足以下方程组：</p>

<p>π = πP</p>

<p>Σπi = 1</p>

<p>其中，P是NPC状态转移矩阵，π是稳态分布，Σπi = 1表示稳态分布的概率和为1。解这个方程组可以得到每个状态的稳态概率，从而得到NPC模拟中各个行为的概率分布。在NPC状态转移矩阵描述的例子中，如果我们假设NPC的初始状态为巡逻状态，那么在该矩阵满足细致平稳条件的情况下，进行100次状态转移后，各个状态的稳态概率分别为：</p>

<p>巡逻状态：0.5714</p>

<p>攻击状态：0.2857</p>

<p>逃跑状态：0.1429</p>

<p>这意味着，当NPC处于稳态时，其有57.14%的概率处于巡逻状态，28.57%的概率处于攻击状态，14.29%的概率处于逃跑状态。需要注意的是，这些数值并不是固定不变的，它们取决于NPC状态转移矩阵的具体数值和NPC的初始状态。</p>]]></content><author><name>FrozzenCJ</name><email>joeychou0805@gmail.com</email></author><category term="Design" /><summary type="html"><![CDATA[抽象一些理论方法来分析游戏设计，以及游戏设计的客观认识 理论分析 不可能三角形原则 蒙代尔的不可能三角形原则： 两项容易导致极端化 四项去两项维度和三角形类似，四项去一项，分主次思维成本增加，3！=6次组合 简洁高效的思维，拓展性良好，太简单的模型可用性差，太复杂的模型复用性差，在此中间获得平衡，设计就是简单-&gt;复杂-&gt;抽象简单的过程（学习，工作等方方面面都是）。 例如，对于产品来说，成本-性能-可靠性 三个维度去考虑，一个有趣的路径： 互联网往往通过不计成本的方式，用高性能和高可靠性吸引专业化(目标)用户；然后产品稳定后，拓展渠道，降低成本，逐渐在性能和可靠性的平衡中，不断向低成本靠近，拓宽用户范围。 按照此原则，初始游戏应首先考虑生存问题，应在 成本-可玩性-画风 上做出平衡。成本主要指2d/3d的资源，人员开发成本，其最低成本就是人员（单位成本X时间=实际成本），人心齐聚代价会低很多。可玩性的最低就是某类固定爱好玩家，比如米氏二次元就有些固定玩家，总有喜欢某些品类的玩家。画风最低就是吸引玩家来体验的意愿程度，像素风，卡通风格（有趣），真实风等, 当然，越精致成本越高。 1. 卡通风格：使用简化的线条和明亮的色彩，突出游戏的趣味性和轻松感。 2. 真实主义风格：力求在游戏中还原真实的场景和人物形象，通常使用高质量的纹理和细节。 3. 手绘风格：仿佛手工绘制的效果，注重线条和色彩的表现力和艺术感染力。 4. 像素风格：使用像素化的图形和局限的色彩，重现早期电子游戏的风格和情怀。 5. 立体主义风格：通过立体化和抽象化的手法来表现游戏世界，突出其科幻或幻想的特点。 6. 欧美风格：通常注重写实和细节的表现，也较为严肃和成熟。 7. 东方风格：强调线条、色彩和符号的表现力，通常具有浓郁的文化氛围和情感色彩。 8. 恐怖风格：注重调节游戏气氛和心理效果，通过黑暗、血腥和恐怖的元素来吸引玩家注意。 吸引之后就是留存，和找plmm类似，始于颜值，终于灵魂，那就是可玩性，也是核心所在，比如《通神榜》中 吸血鬼幸存者+土豆兄弟的玩法， 武器系统是两者的结合，充满了随机的趣味性。 而平滑的成长-刷怪机制，比土豆兄弟要爽，成型后薄纱各种敌人的快感也是让人流连忘返的关键点。当然，里面有些设计漏洞可能会加强短期体验-降低整体寿命，比如抛瓦刷灵力转刀剑，吸血+高伤，基本能站撸，但不在前期考虑范畴。 如果天时地利人和，初期取得一定的成功，中期就要有稳定的制造业流程，罐头游戏只是一个分支，另一个是抽象出关键的流程和制作思路（框架），在现有的基础上能够快速做出不同品类，例如《原神》- 《星穹》（画风和用户信息界面GUI等有非常近似的渲染管线） 参考米哈游的工作管线，以先单机后联机的方案考虑（当然前期需要定好，不然网络部分迭代起来会比较麻烦），主设计-框架-开发-设计-开发- 这个流程 马尔科夫链 ChatGPT 3.5 给的回答： 马尔科夫链在游戏中有多种应用，其中包括： 游戏AI：利用马尔科夫链模型来构建游戏AI，使其能够根据当前状态和可能的转移情况做出最优决策。 游戏设计：通过构建马尔科夫链模型来预测玩家的行为和游戏进程，从而优化游戏设计和玩法。 网络游戏：使用马尔科夫链模型来预测玩家的在线时间和游戏偏好，从而提供个性化的游戏体验。 游戏平衡：通过分析游戏中的各种状态和转移情况，构建马尔科夫链模型来评估游戏的平衡性和公正性，从而进行相应的调整和优化。 马尔科夫链（Markov Chain）是一种随机过程，它具有“无记忆性”，即下一状态的概率仅取决于当前状态，而与过去的状态无关。在游戏开发中，马尔科夫链可以用于实现各种基于概率的系统，例如随机地图生成、NPC行为模拟、游戏故事生成等。 创造性GPT4给的回答： 以下是马尔科夫链在游戏中的一些具体应用： 随机地图生成：在游戏中，利用马尔科夫链可以生成具有一定规律性的随机地图。例如，在一个战略游戏中，不同类型的地形可以看作是马尔科夫链的状态，通过预先定义各种地形之间的转移概率，我们可以生成具有一定规律性的随机地图。 NPC行为模拟：马尔科夫链可以用来模拟具有简单行为逻辑的NPC。通过为NPC设定一系列行为状态和相应的状态转移概率，例如：行走、站立、攻击等，可以实现NPC在不同状态之间的随机切换，从而使其表现出较为真实的行为。 游戏故事生成：利用马尔科夫链可以生成具有一定连贯性的游戏故事。通过为游戏设定一系列情节节点和相应的状态转移概率，可以让游戏故事在不同情节之间自然地转换，从而提高游戏的可玩性和故事的丰富度。 随机事件生成：在很多游戏中，随机事件是增强游戏趣味的重要元素。通过马尔科夫链，我们可以为游戏设定一系列随机事件和相应的状态转移概率，使事件的发生和转换具有一定的规律性，从而让玩家在游戏过程中遇到更多有趣的挑战。 概率平衡设计：在游戏中，某些资源、技能或物品的获取往往需要一定的随机性。利用马尔科夫链可以对这些元素的获取进行概率平衡设计，从而确保游戏的公平性和可玩性。 总之，马尔科夫链在游戏中的应用颇为广泛，它可以用于实现各种基于概率的系统，提高游戏的趣味性、真实感和可玩性。 应用 1. 随机地图生成 在随机地图生成中应用马尔科夫链，主要是通过定义地形之间的状态转移概率来生成具有一定规律性的随机地图。以下是一个简单的步骤说明： 首先，确定地形类型。在游戏中，可能有多种类型的地形，如草地、沙漠、山地、森林等。这些地形类型将作为马尔科夫链的状态。 其次，定义状态转移概率矩阵。状态转移概率矩阵是一个二维数组，其行和列分别代表不同的地形状态，矩阵中的元素表示从一个状态转换到另一个状态的概率。例如，从草地转移到沙漠的概率可能较低，而从草地转移到森林的概率较高。通过定义这个矩阵，我们可以控制生成地图中不同地形之间的相互关系。 初始化地图。创建一个二维数组来表示地图的网格，每个网格对应一个地形状态。可以从一个随机或预先设定的初始状态开始生成地图。 根据状态转移概率矩阵生成地图。遍历地图的每个网格，基于当前网格的地形状态和状态转移概率矩阵，随机选择下一个地形状态。可以采用不同的遍历方式，如从左到右、从上到下、螺旋式等。对于每个网格，根据其相邻网格的地形状态和转移概率矩阵来更新其地形状态。 根据需要优化地图。生成的地图可能需要进行一些优化，如确保地图的连通性、平衡各种地形的分布比例等。可以通过一些后处理算法来实现这些优化目标。 渲染地图。根据生成的地图网格及其地形状态，将地图渲染到游戏画面上。通常，需要为不同地形状态设计相应的美术素材（如不同类型的地面纹理），以提高地图的视觉效果。 通过以上步骤，我们可以利用马尔科夫链生成具有一定规律性的随机地图。这种方法的优点在于可以在保证地图随机性的同时控制地形之间的相互关系，使生成的地图更具有真实感和可玩性。同时，通过调整状态转移概率矩阵，可以轻松实现不同风格的地图生成。 2.NPC行为模拟 假设有一个游戏中的NPC，其状态可分为三种：巡逻、攻击和逃跑。其中，巡逻状态下NPC有50%的概率继续巡逻，30%的概率转变为攻击状态，20%的概率转变为逃跑状态；攻击状态下NPC有70%的概率继续攻击，20%的概率转变为逃跑状态，10%的概率转变为巡逻状态；逃跑状态下NPC有80%的概率继续逃跑，20%的概率转变为巡逻状态。在马尔科夫链收敛后，各个状态的概率分布趋于稳定，称为平稳分布或稳态分布。在稳态分布下，各个状态的概率表示为πi，表示在长时间运行后，系统处于状态i的概率。在游戏NPC行为模拟中，各个行为的概率取决于NPC状态转移矩阵和NPC的初始状态。如果NPC状态转移矩阵满足细致平稳条件，那么稳态分布可以通过转移矩阵的特征向量计算得出。具体而言，稳态分布π满足以下方程组： π = πP Σπi = 1 其中，P是NPC状态转移矩阵，π是稳态分布，Σπi = 1表示稳态分布的概率和为1。解这个方程组可以得到每个状态的稳态概率，从而得到NPC模拟中各个行为的概率分布。在NPC状态转移矩阵描述的例子中，如果我们假设NPC的初始状态为巡逻状态，那么在该矩阵满足细致平稳条件的情况下，进行100次状态转移后，各个状态的稳态概率分别为： 巡逻状态：0.5714 攻击状态：0.2857 逃跑状态：0.1429 这意味着，当NPC处于稳态时，其有57.14%的概率处于巡逻状态，28.57%的概率处于攻击状态，14.29%的概率处于逃跑状态。需要注意的是，这些数值并不是固定不变的，它们取决于NPC状态转移矩阵的具体数值和NPC的初始状态。]]></summary></entry><entry><title type="html">工作总结 - 付费 &amp;amp; 活跃活动</title><link href="http://localhost:4000/2023/05/01/%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9-%E4%BB%98%E8%B4%B9-&-%E6%B4%BB%E8%B7%83%E6%B4%BB%E5%8A%A8.html" rel="alternate" type="text/html" title="工作总结 - 付费 &amp;amp; 活跃活动" /><published>2023-05-01T00:00:00+08:00</published><updated>2023-05-01T00:00:00+08:00</updated><id>http://localhost:4000/2023/05/01/%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9%20-%20%E4%BB%98%E8%B4%B9%20&amp;%20%E6%B4%BB%E8%B7%83%E6%B4%BB%E5%8A%A8</id><content type="html" xml:base="http://localhost:4000/2023/05/01/%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9-%E4%BB%98%E8%B4%B9-&amp;-%E6%B4%BB%E8%B7%83%E6%B4%BB%E5%8A%A8.html"><![CDATA[<h3 id="运营活动思考">运营活动思考</h3>

<p><a href="">运营活动营收总结</a></p>

<h3 id="相关工作时间分配内容">相关工作时间分配内容</h3>

<p>策划文档分析 10%</p>

<p>用例设计和迭代 40% 参考通用用例，根据策划文档，UX设计，类似代码，设计用例</p>

<p>测试 30% 执行用例，测试bug，提bug，跟踪bug</p>

<p>效率工具开发 10% 用于提高测试效率和相关问题预警的工具开发</p>

<p>典藏武器, 典藏载具, 典藏时装, 典藏家具, 典藏蓝图, 典藏庄园, 幸运礼盒, 时尚品鉴, 不放回抽奖, 晶核抽奖, 集训礼包, 分阶段礼包 等 觉得很赞 (abtest, 海外地区不同奖池 等策划的小心思 紧随其后)</p>

<p>可乐大亨, 南瓜大盗, 圣诞树装扮, 春节饭店, 玫瑰爱意, 樱花绽放 等 觉得很赞</p>]]></content><author><name>FrozzenCJ</name><email>joeychou0805@gmail.com</email></author><category term="Work" /><category term="Design" /><summary type="html"><![CDATA[运营活动思考 运营活动营收总结 相关工作时间分配内容 策划文档分析 10% 用例设计和迭代 40% 参考通用用例，根据策划文档，UX设计，类似代码，设计用例 测试 30% 执行用例，测试bug，提bug，跟踪bug 效率工具开发 10% 用于提高测试效率和相关问题预警的工具开发 典藏武器, 典藏载具, 典藏时装, 典藏家具, 典藏蓝图, 典藏庄园, 幸运礼盒, 时尚品鉴, 不放回抽奖, 晶核抽奖, 集训礼包, 分阶段礼包 等 觉得很赞 (abtest, 海外地区不同奖池 等策划的小心思 紧随其后) 可乐大亨, 南瓜大盗, 圣诞树装扮, 春节饭店, 玫瑰爱意, 樱花绽放 等 觉得很赞]]></summary></entry><entry><title type="html">工作总结 - 工具开发</title><link href="http://localhost:4000/2023/05/01/%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9-%E5%B7%A5%E5%85%B7%E5%BC%80%E5%8F%91.html" rel="alternate" type="text/html" title="工作总结 - 工具开发" /><published>2023-05-01T00:00:00+08:00</published><updated>2023-05-01T00:00:00+08:00</updated><id>http://localhost:4000/2023/05/01/%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9%20-%20%E5%B7%A5%E5%85%B7%E5%BC%80%E5%8F%91</id><content type="html" xml:base="http://localhost:4000/2023/05/01/%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9-%E5%B7%A5%E5%85%B7%E5%BC%80%E5%8F%91.html"><![CDATA[<blockquote>
  <p>工欲善其事，必先利其器</p>
</blockquote>

<h2 id="工具开发">工具开发</h2>

<p><a href="">剧情编辑器</a></p>

<p><a href="">Jenkins + Feedback + POPO</a></p>

<p><a href="">稳定性自测工具</a></p>

<p><a href="">奖励监控平台</a></p>

<p><a href="">性能跑测平台</a></p>

<p><a href="">表格导出数据检查工具</a></p>

<p>油猴脚本 - diff平台关联新版excel diff平台</p>

<h2 id="功能迭代">功能迭代</h2>

<p>组内POPO机器人: 适配多人多指令</p>

<p>热更新平台: 一些功能增加，比如事故通告等，优化搜索算法</p>

<p>translate: 定时清理脚本</p>

<p>油猴脚本 - diff平台-相关工具迁移 关联redmine</p>

<h2 id="迁移部署">迁移部署</h2>

<p>version: 热更新、月报平台迁移和部署及相关问题解决</p>

<p>translate: 翻译平台迁移和部署及相关问题解决</p>

<p>txtool: 占表工具迁移后前端js版本不一致</p>]]></content><author><name>FrozzenCJ</name><email>joeychou0805@gmail.com</email></author><category term="Work" /><category term="Tools" /><summary type="html"><![CDATA[工欲善其事，必先利其器 工具开发 剧情编辑器 Jenkins + Feedback + POPO 稳定性自测工具 奖励监控平台 性能跑测平台 表格导出数据检查工具 油猴脚本 - diff平台关联新版excel diff平台 功能迭代 组内POPO机器人: 适配多人多指令 热更新平台: 一些功能增加，比如事故通告等，优化搜索算法 translate: 定时清理脚本 油猴脚本 - diff平台-相关工具迁移 关联redmine 迁移部署 version: 热更新、月报平台迁移和部署及相关问题解决 translate: 翻译平台迁移和部署及相关问题解决 txtool: 占表工具迁移后前端js版本不一致]]></summary></entry><entry><title type="html">梦境侦探</title><link href="http://localhost:4000/2023/04/30/%E5%89%A7%E6%83%85%E6%B8%B8%E6%88%8F.html" rel="alternate" type="text/html" title="梦境侦探" /><published>2023-04-30T00:00:00+08:00</published><updated>2023-04-30T00:00:00+08:00</updated><id>http://localhost:4000/2023/04/30/%E5%89%A7%E6%83%85%E6%B8%B8%E6%88%8F</id><content type="html" xml:base="http://localhost:4000/2023/04/30/%E5%89%A7%E6%83%85%E6%B8%B8%E6%88%8F.html"><![CDATA[<p>梦境侦探</p>

<p>主角 F： 25岁的毕业生，电力专业兼修计算机，密码学研究生。毕业前夕找了一家游戏公司做QA工作，有强迫症，为了增强记忆力，他经常吃一种名为pqq的药物。经常做一些奇奇怪怪的梦。</p>

<p>有一周末的下午，他收到一封奇怪的email，是邀请他作为侦探去调查上个世纪美国一家酒店的凶杀害案，就像一个恶作剧一样，后面全是一堆乱码。</p>

<p>凶杀案：1989年，特洛伊将军被发现在塞西尔酒店死亡，死亡原因是突发心脏病，其无心脏病史，且死亡时双眼盯着浴室。警方第一轮搜查时并未发现任何蛛丝马迹，像是自然死亡。而后警长准备第二次检查时，军方进行介入，将特洛伊遗体带走。
1天后，一名旧居酒店的住客在客房内被枪杀，但周围住客纷纷表示，没有听到枪声或者奇怪的声音。</p>

<p>2022年线：
F梦到自己参加 DreamWorks 公司（EA大厦）的面试邀请，被安排住在塞西尔酒店居住。他在酒店中遇到许多奇奇怪怪的人，有极客，有长得像父亲和母亲的人，有水电工。在晚饭后，服用了pqq，他关闭了电脑，回到房间刷LeetCode累了的他，想出来走走。时间已经是晚上8点半了，但边走边生起困意。</p>

<p>计算时间点：房间，走廊，电梯（到大厅时候醒一次，看表），大厅，餐厅，大厅，电梯（到屋顶时候醒一次，看表），屋顶（吹一吹冷气想清醒），电梯（到客房走廊时候醒一次，看表），走廊，房间</p>

<p>隐藏地点：浴室中间隔间，直通洗衣房。</p>

<p>梦境：89/13，22/13，13，22/89，22/13，89/13，13，22/13/89，89，89，22/89
年线重合地方，人物之间互相看不到，但是道具通用，用于互相解密。</p>

<p>人物切换：主角 马图文教授 13年布鲁小姐，89年特洛伊将军，豪斯家族小女儿，将军助理
隐藏人物视角：管家（真结局）</p>

<p>主流程</p>

<p>房间：闭一会眼睛，睁开，时间变为1989年，自己作为侦探受雇佣查询 布鲁小姐事件（13年） 和 马图文教授 身份（背包中 会议邀请含 和 雇佣信件（后面变成报纸一角））。房间内东西可互动，提前拿手机（关键道具，89大哥大，13年翻盖，22年智能），房卡（关键道具），学术报告（真一）</p>

<p>出门后，发现（手机（没拿变成13（存着一半的学术报告网页，拿了变成89）/房卡（拿了变成钥匙）/学术报告（前两个都拿了，回来后变成89年房间，否则变为13年 布鲁小姐房间））
房卡没拿需要走廊解谜拿钥匙（22年走廊，清洁工帮忙进门）</p>

<p>如果都拿了，就不用回房间，直接去电梯那边。
走廊： 遇见蓝。说很熟悉，她准备去吃个晚饭，希望还能吃到苹果派
上电梯后，蓝拦住电梯，准备进来，往后退一步，突然踏空，一眨眼，醒了，看了看时间（没回房间，回到房间时间+30min，）
然后一眨眼，变成蓝，如果前面是蓝的手机，出现下半段学术报告，否则出现管家声音，说 将军不可以包庇小女儿，对方是祸害。</p>

<p>电梯： 89年老式电梯，不用刷卡，13年和22年，一样的电梯</p>

<p>下电梯后（还是布鲁小姐），到了大厅，解密去餐厅吃东西，如果之前触发管家（一些提示），是89年画风居多，更容易拿到餐券，否则现代餐厅，有程序员，商务人员和一名科学家（89年就是科学家的父亲，父亲表明洗衣房（不可进入）有什么奇异的物质的传播，13 儿子直接说检测到超低声波），
见到父母对自己的孩子（F标志）训斥。问其有什么梦想，孩子说要学计算机，但父母要求做 电力工程师或者医生。 大厅中可以获得3枚比特币。</p>

<p>到餐厅之后：
吃完饭后，突然有点困，闭上眼睛，被叫醒，变成马图文先生，可以选择使用比特币付小费（消费3刀），对方接受并告诉马图文线索（特洛伊给小女孩的八音盒） 否则醒来还是布鲁小姐准备回去。
到了大厅，所有人都不见了，如果是马图文，按照线索获得一个八音盒（解救布鲁的关键道具），
是布鲁小姐，断电，然后电力工程师修电梯（一边抱怨）花了30min，电力工程师身上带了一个F标志 （加上之前就花了1小时）
然后上电梯，又踩空，醒来变成布鲁（如果之前是布鲁，就不变）上了电梯就变成一个走廊，一个男人（主管）拿着刀一直追，说不能发生这样的事，对方可是将军，主角要一直跑，然后敌不动我不动，如果被追到，直接死，布鲁线断。否则冲向电梯，快速按向房间，只有顶楼能亮（这里细节，不用刷电梯卡，89年电梯），然后到了天台。</p>

<p>天台：
离开电梯后，风一吹，醒了，变成F看了看手表（统计之前时间），
天台上面有一个巨大的水箱，（如果有八音盒，一个医生在吃糖，医生背后一个巨大的F，然后提示玩家最新的流行歌曲，你觉得和八音盒和熟悉，听一遍八音盒，如果没听，影响布鲁存活， 听完雇佣含变成 求救纸条 ）否则医生背后没有F，而且在抽烟。 抱怨抱怨小公司和大公司吧。
然后进入电梯，又到了走廊，踩空（或者 电梯环境和 天台环境互换， 变成 89 天台， 水箱变成天井），变成布鲁，一开门见到拿到主管拿刀，然后跑路，引导跑到天井上面（天台转圈圈），然后犹豫一下，跳了下去。穿过一段黑暗，里面变成了水，布鲁被淹。
如果前面听了八音盒，这时候响起八音盒的音乐，自己被救起，（F医生）真结局1  否则假结局1</p>

<p>无论真假结局，都在电梯中醒来，变成F，到走廊回房间，真结局 手机新闻报道 布鲁已经获救，否则 死亡</p>

<p>回到房间，洗澡，如果之前节省1h，变成管家，    浪费1小时，变成助理，洗完澡听到外面有动静，有人在写东西，抄家伙，打晕对方（管家获得管家报告，自说自话说，还好发现及时，必须加快行动，     后者为获得助理报告，自说自话说，被发现了，要赶快离开  助理发现了管家的问题和地下的黑盒子研究所写的报告），但你也被一个人打晕（前者为管家打晕马图文，将军打晕管家，    @@后者为助理打晕管家（更早时期），军情6处干员打晕助理）
后者成为假结局2，助理的房间 发现浴室有暗门，通向地下，发现一楼洗衣房暗阁，有一个房间，里面有军情6处的人在审问，还有一个巨型的黑盒子。然后对面问，将军是否包庇小女孩，是否打算把小女孩转移走，回答：是/否/不说话 反正都会死，然后看到黑盒子发出波状辐射。</p>

<p>前者：将军视角从床上醒来，旁边躺着小女孩（房间内小女孩的画， 获得（影响F的结局隐藏结局）， 特洛伊将军的日记，解释小女孩很想豪斯），然后听到隔壁动静，穿过浴室，发现管家打晕马图文，将军打晕管家，发现（管家报告，报告为 小女孩发现黑盒子， 将军和小女孩不伦恋（特洛伊和）， 将军的危险警报 秘密 ）。然后自说自话要赶去地下室（非地下室，隐藏房间，旁边是洗衣房，特别大的轰隆声），穿过浴室，来到一层地下，发现助理已经被黑盒子中冲击波弄死了, 非常悲伤，立马回去房间，带小女孩走，小女孩在洗澡，突然吓到了，然后将军对其说，马上跑路，回房间收拾东西（到上面一层拿东西走人， 上一层本为 豪斯历代家主主的房间，后来被改造为小女孩的房间， 房间内可以获得八音盒）
然后 通过暗层 回房间，经过马图文房间时发现管家已经不见了，出去的门被锁住了，然后回到自己房间，出去的门也被锁住了，回到小女孩的房间，发现管家拿着刀（之前就是在追小女孩，后来找不到直接来到小女孩房间），然后被管家绑到地下室，说出前因后果 （军情6处早就发现将军的特殊能力，发现是一种特殊的波段，超低声波，能够帮助个体在睡眠时候获得一些危机预警的能力，然后早在搬进来之前就做了黑盒子，并且是通过老豪斯的帮助，然后酒店创建时就已经做了暗阁存放黑盒子，黑盒子放出的超低声波能影响普通人，只有脑电波同频率的豪斯将军能够抵挡，所以二层只有豪斯和助理。将军和助理也知道这件事情，本来对袍泽（豪斯）没啥情谊的，但为了小女孩，决定停止研究，但是被管家发现。 ），
特洛伊作为军人还是挣脱了束缚，开枪射击管家，但不小心打到助理身上（洗衣房声音很大，没人听见），最后射伤了管家，管家从暗门通向洗衣房的门出去，并锁住了门。 特洛伊搏斗后很累，也看到了波的形状，希望小女孩能顺利逃脱，门被锁出不去了。</p>

<p>近距离接近超低声波，如果过于激烈，反而会导致心脏跳动频率被声波同调，最后供血不足，类似心脏病的死法，捂住胸口之类的。</p>

<p>惊醒后，触发隐藏结局
获得了两个真结局 （布鲁小姐和小女孩存活），且获得两个重要道具（八音盒和图画），触发参加面试结局，对方一面为布鲁小姐，二面为小女孩，并成功入职。（圆梦结局）</p>

<p>否则，直接一个入职失败。</p>

<p>最后的最后，再度惊醒，发现周一上午 9点半，快迟到了，F标志，
影响工作心情（两个不同结局）</p>

<p>2013年线：</p>

<p>侦探 F 来到 2013年的加州洛杉矶中心，作为侦探受雇佣查询 布鲁小姐事件。梦境中非常奇怪（就梦境中那些鬼怪，多加奇怪渲染）</p>

<p>1989年线：
塞西尔酒店坐落在弗吉尼亚州洛圣都市中心 Los Santos，上个世纪XX年代，1980</p>

<p>退休的将军 特洛伊 在此过着养老的生活，虽然他年事已高（67），但是身体非常的健康，十分英武，除了中枪带来旧伤的左腿行动较为不便。酒店是老战友 豪斯的祖宅改造而成， 而豪斯家族也一边住在酒店中，一边经营者酒店。豪斯家族中住着女主人 麦莉-豪斯（44） 和 她的大女儿 卡莲那（21）和小女儿JJ（15）, 其丈夫海外经商，J-豪斯妻子死于难产。</p>

<p>斯坦福的年轻教授 研究数字和梦境的 马图文 要参加一场 关于梦境的学术会议，住在酒店当中（原助理房间，隔壁就是特洛伊将军的房间， 两件浴室相对）。</p>

<p>历史线：</p>

<p>豪斯家族 乔纳斯-豪斯（1899 - ？） 第一代家主，在二战中白手起家，依靠倒卖军火赚到非常多的钱，在美国加利福尼亚州洛杉矶 郊外 建立了一座 豪斯庄园。 老来得子的他，有一个儿子，乔吉尔-豪斯（1920 - ），一个女儿，麦莉-豪斯（1945 - ）。
儿子 J – 豪斯 与1940年参加美国海军陆战队，1941年12月参与太平洋战争，认识了 福柯-特洛伊，经历生死，成为至交。J-豪斯在这场战役之后，选择退伍，帮助家里打理生意。但几年后，军火生意被国家禁止，老豪斯突发心脏病骤然离世。豪斯兄妹按照老豪斯的决定卖掉豪斯庄园，去市中心经营一家豪斯酒店。早年间，豪斯酒店经营非常成功，但逐渐起了怪事，住在酒店中的客人经常会做恶梦，而家主J-豪斯也突发心脏病，而麦莉声称，这个酒店阴气很重，哥哥生前经常做噩梦，有战场时的画面，有因军火生意间接死去人的索命。哥哥不希望家业就此断绝，试过很多方法解决问题，但都没成功。哥哥死前曾寄信给 老战友 特洛伊，希望他能用军方力量查明问题。 
特洛伊 年轻的时候骁勇善战，在越南战争中表现突出，在全连覆灭的情况下，成功撤离越南。其独有的梦境意识帮他一次又一次化解了危机。回到美国的他成了民族英雄，被授予
海军陆战队上将，但由于腿部枪伤，无法上战场，于是退居二线，负责军用科技研究管理。他对自己梦境意识非常热衷，希望能研究出其原理，能在日后战场中帮助士兵避险。当他收到 老战友豪斯的来信，带着一个管家和一个助理来到 酒店中住下（1973），并开始着手研究酒店中的奇怪事情。虽然最终没有发现任何问题，但是豪斯将军住下的时日里，酒店噩梦事件逐渐减退。妹妹将酒店名称改成 塞西尔酒店，人们也逐渐忘记了噩梦这件事。
管家：从事军情六处的特工，成为保护（？）将军的隐藏角色，后逐渐融入酒店，成为酒店的主管。
助理：负责将军和研究机构资料互通的助理，没有人见过他出房门，也不知道他怎么和外界联系。</p>

<p>结局 真1，2可同时
假结局只有一个</p>

<p>真结局1： 布鲁小姐求救纸条（水箱前获得，水箱中醒来（22年相关物品+89年相关物品））</p>

<p>真结局2：获知一切真相，特洛伊 心脏病死 管家受伤，小女孩逃脱。 （影响隐藏结局）
道具：学术报告，特洛伊报告，助理报告，管家报告（管家视角获得），八音盒， 小女儿的图画（同时获得触发隐藏结局， F的面试成功）， 布鲁小姐求救纸条（真结局1） 
结果：真相，面试成功，梦醒</p>

<p>假结局3：特洛伊 心脏病死 管家没受伤 小女孩逃脱失败 （影响隐藏结局）
假结局2：助理 枪杀
假结局1： 布鲁小姐 淹死</p>]]></content><author><name>FrozzenCJ</name><email>joeychou0805@gmail.com</email></author><category term="Game" /><category term="Design" /><summary type="html"><![CDATA[梦境侦探 主角 F： 25岁的毕业生，电力专业兼修计算机，密码学研究生。毕业前夕找了一家游戏公司做QA工作，有强迫症，为了增强记忆力，他经常吃一种名为pqq的药物。经常做一些奇奇怪怪的梦。 有一周末的下午，他收到一封奇怪的email，是邀请他作为侦探去调查上个世纪美国一家酒店的凶杀害案，就像一个恶作剧一样，后面全是一堆乱码。 凶杀案：1989年，特洛伊将军被发现在塞西尔酒店死亡，死亡原因是突发心脏病，其无心脏病史，且死亡时双眼盯着浴室。警方第一轮搜查时并未发现任何蛛丝马迹，像是自然死亡。而后警长准备第二次检查时，军方进行介入，将特洛伊遗体带走。 1天后，一名旧居酒店的住客在客房内被枪杀，但周围住客纷纷表示，没有听到枪声或者奇怪的声音。 2022年线： F梦到自己参加 DreamWorks 公司（EA大厦）的面试邀请，被安排住在塞西尔酒店居住。他在酒店中遇到许多奇奇怪怪的人，有极客，有长得像父亲和母亲的人，有水电工。在晚饭后，服用了pqq，他关闭了电脑，回到房间刷LeetCode累了的他，想出来走走。时间已经是晚上8点半了，但边走边生起困意。 计算时间点：房间，走廊，电梯（到大厅时候醒一次，看表），大厅，餐厅，大厅，电梯（到屋顶时候醒一次，看表），屋顶（吹一吹冷气想清醒），电梯（到客房走廊时候醒一次，看表），走廊，房间 隐藏地点：浴室中间隔间，直通洗衣房。 梦境：89/13，22/13，13，22/89，22/13，89/13，13，22/13/89，89，89，22/89 年线重合地方，人物之间互相看不到，但是道具通用，用于互相解密。 人物切换：主角 马图文教授 13年布鲁小姐，89年特洛伊将军，豪斯家族小女儿，将军助理 隐藏人物视角：管家（真结局） 主流程 房间：闭一会眼睛，睁开，时间变为1989年，自己作为侦探受雇佣查询 布鲁小姐事件（13年） 和 马图文教授 身份（背包中 会议邀请含 和 雇佣信件（后面变成报纸一角））。房间内东西可互动，提前拿手机（关键道具，89大哥大，13年翻盖，22年智能），房卡（关键道具），学术报告（真一） 出门后，发现（手机（没拿变成13（存着一半的学术报告网页，拿了变成89）/房卡（拿了变成钥匙）/学术报告（前两个都拿了，回来后变成89年房间，否则变为13年 布鲁小姐房间）） 房卡没拿需要走廊解谜拿钥匙（22年走廊，清洁工帮忙进门） 如果都拿了，就不用回房间，直接去电梯那边。 走廊： 遇见蓝。说很熟悉，她准备去吃个晚饭，希望还能吃到苹果派 上电梯后，蓝拦住电梯，准备进来，往后退一步，突然踏空，一眨眼，醒了，看了看时间（没回房间，回到房间时间+30min，） 然后一眨眼，变成蓝，如果前面是蓝的手机，出现下半段学术报告，否则出现管家声音，说 将军不可以包庇小女儿，对方是祸害。 电梯： 89年老式电梯，不用刷卡，13年和22年，一样的电梯 下电梯后（还是布鲁小姐），到了大厅，解密去餐厅吃东西，如果之前触发管家（一些提示），是89年画风居多，更容易拿到餐券，否则现代餐厅，有程序员，商务人员和一名科学家（89年就是科学家的父亲，父亲表明洗衣房（不可进入）有什么奇异的物质的传播，13 儿子直接说检测到超低声波）， 见到父母对自己的孩子（F标志）训斥。问其有什么梦想，孩子说要学计算机，但父母要求做 电力工程师或者医生。 大厅中可以获得3枚比特币。 到餐厅之后： 吃完饭后，突然有点困，闭上眼睛，被叫醒，变成马图文先生，可以选择使用比特币付小费（消费3刀），对方接受并告诉马图文线索（特洛伊给小女孩的八音盒） 否则醒来还是布鲁小姐准备回去。 到了大厅，所有人都不见了，如果是马图文，按照线索获得一个八音盒（解救布鲁的关键道具）， 是布鲁小姐，断电，然后电力工程师修电梯（一边抱怨）花了30min，电力工程师身上带了一个F标志 （加上之前就花了1小时） 然后上电梯，又踩空，醒来变成布鲁（如果之前是布鲁，就不变）上了电梯就变成一个走廊，一个男人（主管）拿着刀一直追，说不能发生这样的事，对方可是将军，主角要一直跑，然后敌不动我不动，如果被追到，直接死，布鲁线断。否则冲向电梯，快速按向房间，只有顶楼能亮（这里细节，不用刷电梯卡，89年电梯），然后到了天台。 天台： 离开电梯后，风一吹，醒了，变成F看了看手表（统计之前时间）， 天台上面有一个巨大的水箱，（如果有八音盒，一个医生在吃糖，医生背后一个巨大的F，然后提示玩家最新的流行歌曲，你觉得和八音盒和熟悉，听一遍八音盒，如果没听，影响布鲁存活， 听完雇佣含变成 求救纸条 ）否则医生背后没有F，而且在抽烟。 抱怨抱怨小公司和大公司吧。 然后进入电梯，又到了走廊，踩空（或者 电梯环境和 天台环境互换， 变成 89 天台， 水箱变成天井），变成布鲁，一开门见到拿到主管拿刀，然后跑路，引导跑到天井上面（天台转圈圈），然后犹豫一下，跳了下去。穿过一段黑暗，里面变成了水，布鲁被淹。 如果前面听了八音盒，这时候响起八音盒的音乐，自己被救起，（F医生）真结局1 否则假结局1 无论真假结局，都在电梯中醒来，变成F，到走廊回房间，真结局 手机新闻报道 布鲁已经获救，否则 死亡 回到房间，洗澡，如果之前节省1h，变成管家， 浪费1小时，变成助理，洗完澡听到外面有动静，有人在写东西，抄家伙，打晕对方（管家获得管家报告，自说自话说，还好发现及时，必须加快行动， 后者为获得助理报告，自说自话说，被发现了，要赶快离开 助理发现了管家的问题和地下的黑盒子研究所写的报告），但你也被一个人打晕（前者为管家打晕马图文，将军打晕管家， @@后者为助理打晕管家（更早时期），军情6处干员打晕助理） 后者成为假结局2，助理的房间 发现浴室有暗门，通向地下，发现一楼洗衣房暗阁，有一个房间，里面有军情6处的人在审问，还有一个巨型的黑盒子。然后对面问，将军是否包庇小女孩，是否打算把小女孩转移走，回答：是/否/不说话 反正都会死，然后看到黑盒子发出波状辐射。 前者：将军视角从床上醒来，旁边躺着小女孩（房间内小女孩的画， 获得（影响F的结局隐藏结局）， 特洛伊将军的日记，解释小女孩很想豪斯），然后听到隔壁动静，穿过浴室，发现管家打晕马图文，将军打晕管家，发现（管家报告，报告为 小女孩发现黑盒子， 将军和小女孩不伦恋（特洛伊和）， 将军的危险警报 秘密 ）。然后自说自话要赶去地下室（非地下室，隐藏房间，旁边是洗衣房，特别大的轰隆声），穿过浴室，来到一层地下，发现助理已经被黑盒子中冲击波弄死了, 非常悲伤，立马回去房间，带小女孩走，小女孩在洗澡，突然吓到了，然后将军对其说，马上跑路，回房间收拾东西（到上面一层拿东西走人， 上一层本为 豪斯历代家主主的房间，后来被改造为小女孩的房间， 房间内可以获得八音盒） 然后 通过暗层 回房间，经过马图文房间时发现管家已经不见了，出去的门被锁住了，然后回到自己房间，出去的门也被锁住了，回到小女孩的房间，发现管家拿着刀（之前就是在追小女孩，后来找不到直接来到小女孩房间），然后被管家绑到地下室，说出前因后果 （军情6处早就发现将军的特殊能力，发现是一种特殊的波段，超低声波，能够帮助个体在睡眠时候获得一些危机预警的能力，然后早在搬进来之前就做了黑盒子，并且是通过老豪斯的帮助，然后酒店创建时就已经做了暗阁存放黑盒子，黑盒子放出的超低声波能影响普通人，只有脑电波同频率的豪斯将军能够抵挡，所以二层只有豪斯和助理。将军和助理也知道这件事情，本来对袍泽（豪斯）没啥情谊的，但为了小女孩，决定停止研究，但是被管家发现。 ）， 特洛伊作为军人还是挣脱了束缚，开枪射击管家，但不小心打到助理身上（洗衣房声音很大，没人听见），最后射伤了管家，管家从暗门通向洗衣房的门出去，并锁住了门。 特洛伊搏斗后很累，也看到了波的形状，希望小女孩能顺利逃脱，门被锁出不去了。 近距离接近超低声波，如果过于激烈，反而会导致心脏跳动频率被声波同调，最后供血不足，类似心脏病的死法，捂住胸口之类的。 惊醒后，触发隐藏结局 获得了两个真结局 （布鲁小姐和小女孩存活），且获得两个重要道具（八音盒和图画），触发参加面试结局，对方一面为布鲁小姐，二面为小女孩，并成功入职。（圆梦结局） 否则，直接一个入职失败。 最后的最后，再度惊醒，发现周一上午 9点半，快迟到了，F标志， 影响工作心情（两个不同结局） 2013年线： 侦探 F 来到 2013年的加州洛杉矶中心，作为侦探受雇佣查询 布鲁小姐事件。梦境中非常奇怪（就梦境中那些鬼怪，多加奇怪渲染） 1989年线： 塞西尔酒店坐落在弗吉尼亚州洛圣都市中心 Los Santos，上个世纪XX年代，1980 退休的将军 特洛伊 在此过着养老的生活，虽然他年事已高（67），但是身体非常的健康，十分英武，除了中枪带来旧伤的左腿行动较为不便。酒店是老战友 豪斯的祖宅改造而成， 而豪斯家族也一边住在酒店中，一边经营者酒店。豪斯家族中住着女主人 麦莉-豪斯（44） 和 她的大女儿 卡莲那（21）和小女儿JJ（15）, 其丈夫海外经商，J-豪斯妻子死于难产。 斯坦福的年轻教授 研究数字和梦境的 马图文 要参加一场 关于梦境的学术会议，住在酒店当中（原助理房间，隔壁就是特洛伊将军的房间， 两件浴室相对）。 历史线： 豪斯家族 乔纳斯-豪斯（1899 - ？） 第一代家主，在二战中白手起家，依靠倒卖军火赚到非常多的钱，在美国加利福尼亚州洛杉矶 郊外 建立了一座 豪斯庄园。 老来得子的他，有一个儿子，乔吉尔-豪斯（1920 - ），一个女儿，麦莉-豪斯（1945 - ）。 儿子 J – 豪斯 与1940年参加美国海军陆战队，1941年12月参与太平洋战争，认识了 福柯-特洛伊，经历生死，成为至交。J-豪斯在这场战役之后，选择退伍，帮助家里打理生意。但几年后，军火生意被国家禁止，老豪斯突发心脏病骤然离世。豪斯兄妹按照老豪斯的决定卖掉豪斯庄园，去市中心经营一家豪斯酒店。早年间，豪斯酒店经营非常成功，但逐渐起了怪事，住在酒店中的客人经常会做恶梦，而家主J-豪斯也突发心脏病，而麦莉声称，这个酒店阴气很重，哥哥生前经常做噩梦，有战场时的画面，有因军火生意间接死去人的索命。哥哥不希望家业就此断绝，试过很多方法解决问题，但都没成功。哥哥死前曾寄信给 老战友 特洛伊，希望他能用军方力量查明问题。 特洛伊 年轻的时候骁勇善战，在越南战争中表现突出，在全连覆灭的情况下，成功撤离越南。其独有的梦境意识帮他一次又一次化解了危机。回到美国的他成了民族英雄，被授予 海军陆战队上将，但由于腿部枪伤，无法上战场，于是退居二线，负责军用科技研究管理。他对自己梦境意识非常热衷，希望能研究出其原理，能在日后战场中帮助士兵避险。当他收到 老战友豪斯的来信，带着一个管家和一个助理来到 酒店中住下（1973），并开始着手研究酒店中的奇怪事情。虽然最终没有发现任何问题，但是豪斯将军住下的时日里，酒店噩梦事件逐渐减退。妹妹将酒店名称改成 塞西尔酒店，人们也逐渐忘记了噩梦这件事。 管家：从事军情六处的特工，成为保护（？）将军的隐藏角色，后逐渐融入酒店，成为酒店的主管。 助理：负责将军和研究机构资料互通的助理，没有人见过他出房门，也不知道他怎么和外界联系。 结局 真1，2可同时 假结局只有一个 真结局1： 布鲁小姐求救纸条（水箱前获得，水箱中醒来（22年相关物品+89年相关物品）） 真结局2：获知一切真相，特洛伊 心脏病死 管家受伤，小女孩逃脱。 （影响隐藏结局） 道具：学术报告，特洛伊报告，助理报告，管家报告（管家视角获得），八音盒， 小女儿的图画（同时获得触发隐藏结局， F的面试成功）， 布鲁小姐求救纸条（真结局1） 结果：真相，面试成功，梦醒 假结局3：特洛伊 心脏病死 管家没受伤 小女孩逃脱失败 （影响隐藏结局） 假结局2：助理 枪杀 假结局1： 布鲁小姐 淹死]]></summary></entry><entry><title type="html">工作小工具</title><link href="http://localhost:4000/2023/04/28/%E5%85%B6%E4%BB%96%E5%B0%8F%E5%B7%A5%E5%85%B7.html" rel="alternate" type="text/html" title="工作小工具" /><published>2023-04-28T00:00:00+08:00</published><updated>2023-04-28T00:00:00+08:00</updated><id>http://localhost:4000/2023/04/28/%E5%85%B6%E4%BB%96%E5%B0%8F%E5%B7%A5%E5%85%B7</id><content type="html" xml:base="http://localhost:4000/2023/04/28/%E5%85%B6%E4%BB%96%E5%B0%8F%E5%B7%A5%E5%85%B7.html"><![CDATA[<blockquote>
  <p>博闻强识，一些小tips可以处理不少事情</p>
</blockquote>

<h2 id="clash-for-windows">Clash for Windows</h2>

<p>wmsxwd 机场起飞~</p>

<h2 id="chatgpt">ChatGPT</h2>

<p>YYDS 不说了
抓紧用起来！很多细节能以人性化口吻快速补充！</p>

<h2 id="github-copilot">Github Copilot</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># TODO 写的
</code></pre></div></div>

<p><img src="/assets/images/img/20230428004159.png" alt="" /></p>

<p><img src="/assets/images/img/20230428011135.png" alt="" /></p>

<p>使用评价:</p>

<p>联系上下文能力: ⭐⭐⭐⭐⭐</p>
<ul>
  <li>顾名思义(命名): ⭐⭐⭐ (很多时候和自己命名冲突, 容易导致不可察bug)</li>
  <li>长文自动补全能力: ⭐⭐⭐⭐⭐ 目前来看能满足基本需求</li>
  <li>嘴臭能力: ⭐⭐⭐⭐⭐ (# TODO 真的很臭, 没好话, 得治)</li>
</ul>

<p>安全: ⭐⭐⭐(心理上感觉不安全, 但是用了协议不让Github Copy to train)</p>

<p>由于是Github上开源项目的底层模型，代码理解上肯定是没问题的，但是要适配一个完整逻辑， 还需要写代码的人有自己的想法。</p>

<p>会与不会的人使用的效率差距还是很大的。</p>

<h2 id="obsidian">Obsidian</h2>

<p>Typro的替代品，真好用</p>

<h2 id="stable-diffusion">Stable diffusion</h2>

<p>钢铁2次元</p>

<p>Lora模型</p>

<h2 id="油猴-tampermonkey">油猴 (Tampermonkey)</h2>

<p>js简简单单拉</p>

<p>一些网站的hook，工作上做一些流程快速确认的按钮， 特殊处理一些神奇的跳转， 以及快速抢票！！</p>

<h2 id="watchdog">WATCHDOG</h2>

<p>on_modified 和 write_closed 真实大坑</p>

<p>hash + time.time() 控制下时间就好</p>

<p>监控实时导表确实很方便</p>

<p>django的autoreload 方案：
https://blog.csdn.net/m0_37607365/article/details/79889850</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">#!/usr/bin/env/ python
# -*- coding:utf-8 -*-
</span>
<span class="kn">import</span> <span class="n">time</span>
<span class="kn">from</span> <span class="n">watchdog.observers</span> <span class="kn">import</span> <span class="n">Observer</span>
<span class="kn">from</span> <span class="n">watchdog.events</span> <span class="kn">import</span> <span class="n">FileSystemEventHandler</span>
<span class="kn">import</span> <span class="n">threading</span>

<span class="k">class</span> <span class="nc">FileHandler</span><span class="p">(</span><span class="n">FileSystemEventHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">locks</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">on_created</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">process</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_deleted</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">process</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_modified</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">process</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_moved</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">process</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">event</span><span class="p">.</span><span class="n">src_path</span>
        <span class="k">if</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">locks</span> <span class="ow">and</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">locks</span><span class="p">[</span><span class="n">path</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span>
        
        <span class="c1"># 处理文件事件
</span>        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">event</span><span class="p">.</span><span class="n">event_type</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

        <span class="n">self</span><span class="p">.</span><span class="n">locks</span><span class="p">[</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">event_handler</span> <span class="o">=</span> <span class="nc">FileHandler</span><span class="p">()</span>
    <span class="n">observer</span> <span class="o">=</span> <span class="nc">Observer</span><span class="p">()</span>
    <span class="n">observer</span><span class="p">.</span><span class="nf">schedule</span><span class="p">(</span><span class="n">event_handler</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s">'.'</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">observer</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">KeyboardInterrupt</span><span class="p">:</span>
        <span class="n">observer</span><span class="p">.</span><span class="nf">stop</span><span class="p">()</span>
    <span class="n">observer</span><span class="p">.</span><span class="nf">join</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="定时清理">定时清理</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- utf-8
</span><span class="kn">import</span> <span class="n">os</span>
<span class="kn">import</span> <span class="n">re</span>
<span class="kn">import</span> <span class="n">time</span>
<span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="n">sys</span>

<span class="k">def</span> <span class="nf">clear_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">file_parten</span><span class="p">,</span> <span class="n">time_delta</span><span class="p">):</span>
    
    <span class="n">has_remove</span><span class="o">=</span><span class="bp">False</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="p">.</span><span class="nf">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">re</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="n">file_parten</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">path</span><span class="o">+</span><span class="s">"</span><span class="se">\\</span><span class="s">"</span><span class="o">+</span><span class="n">f</span>
            <span class="n">c_time</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">getctime</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span><span class="o">-</span><span class="n">c_time</span> <span class="o">&gt;=</span> <span class="n">time_delta</span><span class="p">:</span>
                <span class="n">os</span><span class="p">.</span><span class="nf">remove</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="n">has_remove</span><span class="o">=</span><span class="bp">True</span>
                <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="s">"remove_log.txt"</span><span class="p">,</span> <span class="s">"a+"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
                    <span class="nb">file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="nf">str</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">())</span> <span class="o">+</span> <span class="s">": rm</span><span class="se">\n</span><span class="s">"</span> <span class="o">+</span> <span class="nf">str</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="n">has_remove</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"no file remove"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="nf">clear_file</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">regex</span><span class="p">,</span> <span class="n">crontab</span><span class="p">)</span>

</code></pre></div></div>]]></content><author><name>FrozzenCJ</name><email>joeychou0805@gmail.com</email></author><category term="Work" /><category term="Tools" /><summary type="html"><![CDATA[博闻强识，一些小tips可以处理不少事情 Clash for Windows wmsxwd 机场起飞~ ChatGPT YYDS 不说了 抓紧用起来！很多细节能以人性化口吻快速补充！ Github Copilot # TODO 写的 使用评价: 联系上下文能力: ⭐⭐⭐⭐⭐ 顾名思义(命名): ⭐⭐⭐ (很多时候和自己命名冲突, 容易导致不可察bug) 长文自动补全能力: ⭐⭐⭐⭐⭐ 目前来看能满足基本需求 嘴臭能力: ⭐⭐⭐⭐⭐ (# TODO 真的很臭, 没好话, 得治) 安全: ⭐⭐⭐(心理上感觉不安全, 但是用了协议不让Github Copy to train) 由于是Github上开源项目的底层模型，代码理解上肯定是没问题的，但是要适配一个完整逻辑， 还需要写代码的人有自己的想法。 会与不会的人使用的效率差距还是很大的。 Obsidian Typro的替代品，真好用 Stable diffusion 钢铁2次元 Lora模型 油猴 (Tampermonkey) js简简单单拉 一些网站的hook，工作上做一些流程快速确认的按钮， 特殊处理一些神奇的跳转， 以及快速抢票！！ WATCHDOG on_modified 和 write_closed 真实大坑 hash + time.time() 控制下时间就好 监控实时导表确实很方便 django的autoreload 方案： https://blog.csdn.net/m0_37607365/article/details/79889850 #!/usr/bin/env/ python # -*- coding:utf-8 -*- import time from watchdog.observers import Observer from watchdog.events import FileSystemEventHandler import threading class FileHandler(FileSystemEventHandler): def __init__(self): self.locks = {} def on_created(self, event): self.process(event) def on_deleted(self, event): self.process(event) def on_modified(self, event): self.process(event) def on_moved(self, event): self.process(event) def process(self, event): path = event.src_path if path in self.locks and time.time() - self.locks[path] &lt; 1: return # 处理文件事件 print(f"{event.event_type}: {path}") self.locks[path] = time.time() if __name__ == "__main__": event_handler = FileHandler() observer = Observer() observer.schedule(event_handler, path='.', recursive=True) observer.start() try: while True: time.sleep(1) except KeyboardInterrupt: observer.stop() observer.join() 定时清理 # -*- utf-8 import os import re import time import datetime import sys def clear_file(path, file_parten, time_delta): has_remove=False for f in os.listdir(path): if re.match(file_parten, f): f = path+"\\"+f c_time = os.path.getctime(f) if time.time()-c_time &gt;= time_delta: os.remove(f) has_remove=True with open("remove_log.txt", "a+") as file: file.write(str(datetime.datetime.now()) + ": rm\n" + str(f)) if not has_remove: print("no file remove") if __name__ == "__main__": clear_file(file_name, regex, crontab)]]></summary></entry><entry><title type="html">运营活动营收总结</title><link href="http://localhost:4000/2023/04/28/%E8%BF%90%E8%90%A5%E6%B4%BB%E5%8A%A8%E8%90%A5%E6%94%B6%E6%80%BB%E7%BB%93.html" rel="alternate" type="text/html" title="运营活动营收总结" /><published>2023-04-28T00:00:00+08:00</published><updated>2023-04-28T00:00:00+08:00</updated><id>http://localhost:4000/2023/04/28/%E8%BF%90%E8%90%A5%E6%B4%BB%E5%8A%A8%E8%90%A5%E6%94%B6%E6%80%BB%E7%BB%93</id><content type="html" xml:base="http://localhost:4000/2023/04/28/%E8%BF%90%E8%90%A5%E6%B4%BB%E5%8A%A8%E8%90%A5%E6%94%B6%E6%80%BB%E7%BB%93.html"><![CDATA[<h3 id="mmorpg类">MMORPG类</h3>

<h4 id="投放框架---数值设计">投放框架 - 数值设计</h4>

<p>主要付费来源 集训-商城-福利</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">类型</th>
      <th style="text-align: center">人民币</th>
      <th style="text-align: center">信用点</th>
      <th style="text-align: center">金条</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">XX</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">12</td>
      <td style="text-align: center">1200</td>
    </tr>
  </tbody>
</table>

<p>整体投放 - 回收， 稳定游戏内物价
1：10000  -&gt; 1:8000</p>

<p>付费能力 - 付费等级 - 付费投放预期</p>

<p>付费等级预期X通常付费人数</p>

<h5 id="活跃活动---福利活动">活跃活动 - 福利活动</h5>

<p>投放价值比较低，主要配合日常集训完成活跃度，提高DAU用的，最终效果还是要看次留等数据
是活动代币的主要产出来源</p>

<p>签到、游戏内任务、特殊活动玩法（主要）</p>

<h5 id="付费活动---奖池类活动">付费活动 - 奖池类活动</h5>
<p>时装奖池、武器奖池、幸运礼盒、载具奖池等主要营收抽奖</p>

<p>抽奖概率-数值设计</p>

<table>
  <thead>
    <tr>
      <th>编号</th>
      <th>名称</th>
      <th>说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>H</td>
      <td>item</td>
      <td> </td>
    </tr>
    <tr>
      <td>I</td>
      <td>id</td>
      <td> </td>
    </tr>
    <tr>
      <td>J</td>
      <td>数量</td>
      <td> </td>
    </tr>
    <tr>
      <td>K</td>
      <td>限购</td>
      <td> </td>
    </tr>
    <tr>
      <td>L</td>
      <td>前置配方</td>
      <td> </td>
    </tr>
    <tr>
      <td>M</td>
      <td>前置道具</td>
      <td> </td>
    </tr>
    <tr>
      <td>N</td>
      <td>展示组</td>
      <td> </td>
    </tr>
    <tr>
      <td>O</td>
      <td>公共组</td>
      <td> </td>
    </tr>
    <tr>
      <td>P</td>
      <td>组价值折扣</td>
      <td> </td>
    </tr>
    <tr>
      <td>Q</td>
      <td>价值系数</td>
      <td>游戏中投放导致数值需求上的一定价值平衡</td>
    </tr>
    <tr>
      <td>R</td>
      <td>序号</td>
      <td>一个公共组的序号</td>
    </tr>
    <tr>
      <td>S</td>
      <td>单价(RMB)</td>
      <td> </td>
    </tr>
    <tr>
      <td>T</td>
      <td>单价（信）</td>
      <td> </td>
    </tr>
    <tr>
      <td>U</td>
      <td>总价（信）</td>
      <td> </td>
    </tr>
    <tr>
      <td>V</td>
      <td>定价概率</td>
      <td>单抽信用点价格/总价, 理论上玩家所花一定钱能够抽到的概率</td>
    </tr>
    <tr>
      <td>W</td>
      <td><strong><em>系数</em></strong></td>
      <td>调整大数的计算，如果展示组1的道具系数很小，公共组来平衡概率</td>
    </tr>
    <tr>
      <td>X</td>
      <td>内部概率</td>
      <td>一个展示组的内部的概率,指稀有&amp;普通, 第一个乘了系数, 第二个进行权重</td>
    </tr>
    <tr>
      <td>Y</td>
      <td>大数概率</td>
      <td>分组2是按照分组1的剩余概率来内部划分</td>
    </tr>
    <tr>
      <td>Z</td>
      <td><strong><em>权重</em></strong></td>
      <td> </td>
    </tr>
    <tr>
      <td>AA</td>
      <td>最终的概率</td>
      <td> </td>
    </tr>
    <tr>
      <td>AB</td>
      <td>手动权重</td>
      <td>是否有保底</td>
    </tr>
    <tr>
      <td>AC</td>
      <td>期望权重</td>
      <td>用来计算目标概率的权重</td>
    </tr>
    <tr>
      <td>AD</td>
      <td>初始权重</td>
      <td> </td>
    </tr>
    <tr>
      <td>AE</td>
      <td>累加权重</td>
      <td> </td>
    </tr>
    <tr>
      <td>AF</td>
      <td>调节变量</td>
      <td>初始权重/累加权重</td>
    </tr>
    <tr>
      <td>AG</td>
      <td>目标概率</td>
      <td> </td>
    </tr>
    <tr>
      <td>AH</td>
      <td>期望次数</td>
      <td>实际单个玩家抽的预期次数</td>
    </tr>
    <tr>
      <td>AI</td>
      <td>定价次数</td>
      <td> </td>
    </tr>
    <tr>
      <td>AJ</td>
      <td>验算保底</td>
      <td> </td>
    </tr>
    <tr>
      <td>AK</td>
      <td>手动保底</td>
      <td>在验算保底的基础上，手动调整保底次数，一般会提高低价值的保底</td>
    </tr>
    <tr>
      <td>AL</td>
      <td>实际保底</td>
      <td> </td>
    </tr>
    <tr>
      <td>AM</td>
      <td>保底概率</td>
      <td>概率应该小于目标概率</td>
    </tr>
    <tr>
      <td>AN</td>
      <td>浮动保底</td>
      <td> </td>
    </tr>
    <tr>
      <td>AO</td>
      <td>抽取门槛</td>
      <td> </td>
    </tr>
    <tr>
      <td>AP</td>
      <td>冷却次数</td>
      <td> </td>
    </tr>
    <tr>
      <td>AQ</td>
      <td>填写冷却次数</td>
      <td> </td>
    </tr>
    <tr>
      <td>AR</td>
      <td>首次获得</td>
      <td> </td>
    </tr>
    <tr>
      <td>AS</td>
      <td>首次天数</td>
      <td> </td>
    </tr>
    <tr>
      <td>AT</td>
      <td>表格填写</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<pre><code class="language-excel">
'固定值'
$B$3 单抽价格(信)
$B$4 必得倍数 - 保底次数  1.5
$B$5 浮动比例 手动影响保底次数 0.05

'SUM(单价X数量X大数概率) / (单抽信用点价格/12)'
返利比=SUMPRODUCT(S2:S29,J2:J29,Y2:Y29)/(B3/12)
返利比相当于 单位消费，实际获得返利比X单位消费的 收益 (计算收益)

单价  数量
价值系数：游戏中投放导致数值需求上的一定价值平衡
组价值折扣：一般为1-同组道具数量, 不填单人成组，避免系数太小
公共组：0 单人成组  
系数：调整大数的计算，如果展示组1的道具系数很小，公共组来平衡概率

'IFERROR(IF(公共组&lt;1,单价*总价,IF(序号=1,IF(组价值折扣="","",数量*组价值折扣*单价),""))*IF(价值系数="",1,价值系数),"")'
总价=IFERROR(IF(O4&lt;1,T4*J4,IF(R4=1,IF(P4="","",J4*P4*T4),""))*IF(Q4="",1,Q4),"")

'单抽信用点价格/总价'
定价概率=IFERROR(IF(U6="","",$B$3/U6),"")

'IF(OR(总价="",展示组=2),"",IF(IF(限购="",999,限购)*U2/(单抽价格/12*14*50)&gt;1,1,IF(限购="",9999999,限购)*总价/(单抽价格*14*50)))'
系数=
IF(OR(U2="",N2=2),"",IF(IF(K2="",999,K2)*U2/($B$3/12*14*50)&gt;1,1,IF(K2="",9999999,K2)*U2/($B$3*14*50)))

'IF(定价概率="","",IF(展示组=1,定价概率*系数,定价概率/SUMIF(N:N,2,V:V))) 展示组2的定价概率的和'
内部概率=IF(V8="","",IF(N8=1,V8*W8,V8/SUMIF(N:N,2,V:V)))

'IF(展示组=1,IF(定价概率="","",IF(展示组=1,系数*定价概率,SUMIF(N:N,1,$X:$X)*内部概率)),IF(定价概率="","",(1-SUMIF(N:N,1,$Y:$Y))*内部概率))  X 内部概率  Y 大数概率'
大数概率=IF(N2=1,IF(V2="","",IF(N2=1,W2*V2,SUMIF(N:N,1,$X:$X)*X2)),IF(V2="","",(1-SUMIF(N:N,1,$Y:$Y))*X2))

'IF(大数概率="",IF(序号=1,$U$2*$Z$2/(单价*IF(价值系数="",1,价值系数)*数量),""),ROUND(大数概率*100000,0)) U2 是最贵物品的总价 Z2 是最贵物品的权重'
权重=IF(Y2="",IF(R2=1,$U$2*$Z$2/(T2*IF(Q2="",1,Q2)*J2),""),ROUND(Y2*100000,0))

'权重占比'
最终概率=IFERROR(Z2/SUM(Z:Z),"")

'IF(手动权重="",INT(IF(序号&gt;1,上一个道具的期望权重,IF(序号=1,权重/COUNTIF(O:O,O2),权重))),手动权重) 权重/COUNTIF(O:O,O2) O是公共组，即同公共组等分权重'
期望权重=IF(AB2="",INT(IF(R2&gt;1,AC1,IF(R2=1,Z2/COUNTIF(O:O,O2),Z2))),AB2)

'IF(调节变量="累加权重",1,IF(展示组=1,期望权重,期望权重*15))'
初始权重=IF(AF2="累加权重",1,IF(N2=1,AC2,AC2*15))

'期望权重/SUM(AC:AC) AC: 期望权重'
目标概率=AC2/SUM(AC:AC)

'1/目标概率/IF(序号&gt;=1,COUNTIF(O:O,O2),1)'
期望次数=1/AG2/IF(R2&gt;=1,COUNTIF(O:O,O2),1)

'IF(展示组&gt;1,"",IF(总价="",IF(展示组=1,单价*IF(价值系数="",1,价值系数)*数量/$B$3,上一个道具的定价次数),总价/$B$3))'
定价次数=IF(N2&gt;1,"",IF(U2="",IF(R2=1,T2*IF(Q2="",1,Q2)*J2/$B$3,AI1),U2/$B$3))

'IF(定价次数="","",INT(定价次数*必得倍率))'
验算保底=IF(AI2="","",INT(AI2*$B$4))

'IF(OR(验算保底="",展示组=2,手动保底="无保底"),"",IF(手动保底="",验算保底,手动保底))'
实际保底=IF(OR(AJ2="",N2=2,AK2="无保底"),"",IF(AK2="",AJ2,AK2))

'1/实际保底'
保底概率=1/AL2

'IF(实际保底="","",INT(实际保底*(1-$B$5))&amp;","&amp;INT(实际保底*(1+$B$5))) 实际保底的上下限'
浮动保底=IF(AL4="","",INT(AL4*(1-$B$5))&amp;","&amp;INT(AL4*(1+$B$5)))

'实际保底*2+冷却次数
INT(实际保底/4)'
抽取门槛1(特殊)=AL4*2+AP3
抽取门槛2(通用)=INT(AL4/4)

冷却次数=抽取门槛

'IF(浮动保底="",实际保底+抽取门槛-冷却次数,"")'
首次获得=IF(AN2="",AL2+AO2-AP2,"")
</code></pre>

<p>基础计算 - 大数概率</p>
<blockquote>
  <p>定价概率 -&gt; 内部概率 -&gt; 大数概率
分组1：
定价概率 = 内部概率 = 大数概率
分组2：
在分组1的剩余概率中划分</p>
</blockquote>

<p>对外概率：大数概率-奖池和</p>

<p>权重变换 - 抽奖感觉，提升独立成组的出货率</p>
<blockquote>
  <p>特别调整：
大数概率 -&gt; 权重
存在大数概率的道具，直接按照100000抽来算权重
不存在大数概率并且独立成组的物品  引入最贵物品的总价X权重 / (价值系数X单价X数量)，提升权重
最终稀释目标权重</p>
</blockquote>

<p>实际抽奖</p>
<blockquote>
  <p>权重 -&gt; 期望权重
权重 -&gt; 最终概率 -&gt; 目标概率</p>
</blockquote>

<p>保底</p>
<blockquote>
  <p>调整奖池1中相对低价值物品的保底，奖池2无保底，看起来奖池1前期出货率高一点</p>
</blockquote>

<p>同奖励分阶段抽奖</p>
<blockquote>
  <p>比如某大奖道具2个， 是1+1，第一个按照正常抽奖来，第二个则有首次获得需求，如果大佬要全拿到，一般门槛都会非常的高，导致首次获得的次数会比较大，然后国服由于有限制，会计算一个理论获得的天数，跨度不能太大，保证大佬能抽到</p>
</blockquote>

<h5 id="付费活动---集训礼包">付费活动 - 集训礼包</h5>

<p>活动礼包： 产出活动代币、抽奖代币、特殊物料、稀有材料等
商城礼包： 商城一般投放是比较固定的，基本上都有限制</p>

<h5 id="付费活动---消费小队">付费活动 - 消费小队</h5>

<p>吸引消费玩家抱团，提供一些消费返利</p>

<h5 id="付费活动---不放回抽奖">付费活动 - 不放回抽奖</h5>

<p>限时金券的主要产出来源</p>

<h5 id="付费活动---金券商店">付费活动 - 金券商店</h5>

<p>一些非常珍稀的游戏内道具来源，以限时金券作为一般锚定物</p>

<h5 id="付费活动---商队集市">付费活动 - 商队集市</h5>

<p>往期家具投放，游戏内一般物资产出投放（方便大佬跳过交易之城直接购买，生产需要的物品）</p>

<h5 id="固定投放---集训任务--商城">固定投放 - 集训任务 &amp; 商城</h5>

<p>除开所有付费活动外，基础玩家可以体验的基础渠道</p>]]></content><author><name>FrozzenCJ</name><email>joeychou0805@gmail.com</email></author><category term="Work" /><category term="Design" /><summary type="html"><![CDATA[MMORPG类 投放框架 - 数值设计 主要付费来源 集训-商城-福利 类型 人民币 信用点 金条 XX 1 12 1200 整体投放 - 回收， 稳定游戏内物价 1：10000 -&gt; 1:8000 付费能力 - 付费等级 - 付费投放预期 付费等级预期X通常付费人数 活跃活动 - 福利活动 投放价值比较低，主要配合日常集训完成活跃度，提高DAU用的，最终效果还是要看次留等数据 是活动代币的主要产出来源 签到、游戏内任务、特殊活动玩法（主要） 付费活动 - 奖池类活动 时装奖池、武器奖池、幸运礼盒、载具奖池等主要营收抽奖 抽奖概率-数值设计 编号 名称 说明 H item   I id   J 数量   K 限购   L 前置配方   M 前置道具   N 展示组   O 公共组   P 组价值折扣   Q 价值系数 游戏中投放导致数值需求上的一定价值平衡 R 序号 一个公共组的序号 S 单价(RMB)   T 单价（信）   U 总价（信）   V 定价概率 单抽信用点价格/总价, 理论上玩家所花一定钱能够抽到的概率 W 系数 调整大数的计算，如果展示组1的道具系数很小，公共组来平衡概率 X 内部概率 一个展示组的内部的概率,指稀有&amp;普通, 第一个乘了系数, 第二个进行权重 Y 大数概率 分组2是按照分组1的剩余概率来内部划分 Z 权重   AA 最终的概率   AB 手动权重 是否有保底 AC 期望权重 用来计算目标概率的权重 AD 初始权重   AE 累加权重   AF 调节变量 初始权重/累加权重 AG 目标概率   AH 期望次数 实际单个玩家抽的预期次数 AI 定价次数   AJ 验算保底   AK 手动保底 在验算保底的基础上，手动调整保底次数，一般会提高低价值的保底 AL 实际保底   AM 保底概率 概率应该小于目标概率 AN 浮动保底   AO 抽取门槛   AP 冷却次数   AQ 填写冷却次数   AR 首次获得   AS 首次天数   AT 表格填写   '固定值' $B$3 单抽价格(信) $B$4 必得倍数 - 保底次数 1.5 $B$5 浮动比例 手动影响保底次数 0.05 'SUM(单价X数量X大数概率) / (单抽信用点价格/12)' 返利比=SUMPRODUCT(S2:S29,J2:J29,Y2:Y29)/(B3/12) 返利比相当于 单位消费，实际获得返利比X单位消费的 收益 (计算收益) 单价 数量 价值系数：游戏中投放导致数值需求上的一定价值平衡 组价值折扣：一般为1-同组道具数量, 不填单人成组，避免系数太小 公共组：0 单人成组 系数：调整大数的计算，如果展示组1的道具系数很小，公共组来平衡概率 'IFERROR(IF(公共组&lt;1,单价*总价,IF(序号=1,IF(组价值折扣="","",数量*组价值折扣*单价),""))*IF(价值系数="",1,价值系数),"")' 总价=IFERROR(IF(O4&lt;1,T4*J4,IF(R4=1,IF(P4="","",J4*P4*T4),""))*IF(Q4="",1,Q4),"") '单抽信用点价格/总价' 定价概率=IFERROR(IF(U6="","",$B$3/U6),"") 'IF(OR(总价="",展示组=2),"",IF(IF(限购="",999,限购)*U2/(单抽价格/12*14*50)&gt;1,1,IF(限购="",9999999,限购)*总价/(单抽价格*14*50)))' 系数= IF(OR(U2="",N2=2),"",IF(IF(K2="",999,K2)*U2/($B$3/12*14*50)&gt;1,1,IF(K2="",9999999,K2)*U2/($B$3*14*50))) 'IF(定价概率="","",IF(展示组=1,定价概率*系数,定价概率/SUMIF(N:N,2,V:V))) 展示组2的定价概率的和' 内部概率=IF(V8="","",IF(N8=1,V8*W8,V8/SUMIF(N:N,2,V:V))) 'IF(展示组=1,IF(定价概率="","",IF(展示组=1,系数*定价概率,SUMIF(N:N,1,$X:$X)*内部概率)),IF(定价概率="","",(1-SUMIF(N:N,1,$Y:$Y))*内部概率)) X 内部概率 Y 大数概率' 大数概率=IF(N2=1,IF(V2="","",IF(N2=1,W2*V2,SUMIF(N:N,1,$X:$X)*X2)),IF(V2="","",(1-SUMIF(N:N,1,$Y:$Y))*X2)) 'IF(大数概率="",IF(序号=1,$U$2*$Z$2/(单价*IF(价值系数="",1,价值系数)*数量),""),ROUND(大数概率*100000,0)) U2 是最贵物品的总价 Z2 是最贵物品的权重' 权重=IF(Y2="",IF(R2=1,$U$2*$Z$2/(T2*IF(Q2="",1,Q2)*J2),""),ROUND(Y2*100000,0)) '权重占比' 最终概率=IFERROR(Z2/SUM(Z:Z),"") 'IF(手动权重="",INT(IF(序号&gt;1,上一个道具的期望权重,IF(序号=1,权重/COUNTIF(O:O,O2),权重))),手动权重) 权重/COUNTIF(O:O,O2) O是公共组，即同公共组等分权重' 期望权重=IF(AB2="",INT(IF(R2&gt;1,AC1,IF(R2=1,Z2/COUNTIF(O:O,O2),Z2))),AB2) 'IF(调节变量="累加权重",1,IF(展示组=1,期望权重,期望权重*15))' 初始权重=IF(AF2="累加权重",1,IF(N2=1,AC2,AC2*15)) '期望权重/SUM(AC:AC) AC: 期望权重' 目标概率=AC2/SUM(AC:AC) '1/目标概率/IF(序号&gt;=1,COUNTIF(O:O,O2),1)' 期望次数=1/AG2/IF(R2&gt;=1,COUNTIF(O:O,O2),1) 'IF(展示组&gt;1,"",IF(总价="",IF(展示组=1,单价*IF(价值系数="",1,价值系数)*数量/$B$3,上一个道具的定价次数),总价/$B$3))' 定价次数=IF(N2&gt;1,"",IF(U2="",IF(R2=1,T2*IF(Q2="",1,Q2)*J2/$B$3,AI1),U2/$B$3)) 'IF(定价次数="","",INT(定价次数*必得倍率))' 验算保底=IF(AI2="","",INT(AI2*$B$4)) 'IF(OR(验算保底="",展示组=2,手动保底="无保底"),"",IF(手动保底="",验算保底,手动保底))' 实际保底=IF(OR(AJ2="",N2=2,AK2="无保底"),"",IF(AK2="",AJ2,AK2)) '1/实际保底' 保底概率=1/AL2 'IF(实际保底="","",INT(实际保底*(1-$B$5))&amp;","&amp;INT(实际保底*(1+$B$5))) 实际保底的上下限' 浮动保底=IF(AL4="","",INT(AL4*(1-$B$5))&amp;","&amp;INT(AL4*(1+$B$5))) '实际保底*2+冷却次数 INT(实际保底/4)' 抽取门槛1(特殊)=AL4*2+AP3 抽取门槛2(通用)=INT(AL4/4) 冷却次数=抽取门槛 'IF(浮动保底="",实际保底+抽取门槛-冷却次数,"")' 首次获得=IF(AN2="",AL2+AO2-AP2,"") 基础计算 - 大数概率 定价概率 -&gt; 内部概率 -&gt; 大数概率 分组1： 定价概率 = 内部概率 = 大数概率 分组2： 在分组1的剩余概率中划分 对外概率：大数概率-奖池和 权重变换 - 抽奖感觉，提升独立成组的出货率 特别调整： 大数概率 -&gt; 权重 存在大数概率的道具，直接按照100000抽来算权重 不存在大数概率并且独立成组的物品 引入最贵物品的总价X权重 / (价值系数X单价X数量)，提升权重 最终稀释目标权重 实际抽奖 权重 -&gt; 期望权重 权重 -&gt; 最终概率 -&gt; 目标概率 保底 调整奖池1中相对低价值物品的保底，奖池2无保底，看起来奖池1前期出货率高一点 同奖励分阶段抽奖 比如某大奖道具2个， 是1+1，第一个按照正常抽奖来，第二个则有首次获得需求，如果大佬要全拿到，一般门槛都会非常的高，导致首次获得的次数会比较大，然后国服由于有限制，会计算一个理论获得的天数，跨度不能太大，保证大佬能抽到 付费活动 - 集训礼包 活动礼包： 产出活动代币、抽奖代币、特殊物料、稀有材料等 商城礼包： 商城一般投放是比较固定的，基本上都有限制 付费活动 - 消费小队 吸引消费玩家抱团，提供一些消费返利 付费活动 - 不放回抽奖 限时金券的主要产出来源 付费活动 - 金券商店 一些非常珍稀的游戏内道具来源，以限时金券作为一般锚定物 付费活动 - 商队集市 往期家具投放，游戏内一般物资产出投放（方便大佬跳过交易之城直接购买，生产需要的物品） 固定投放 - 集训任务 &amp; 商城 除开所有付费活动外，基础玩家可以体验的基础渠道]]></summary></entry><entry><title type="html">表格导出数据检查工具</title><link href="http://localhost:4000/2023/04/26/%E8%A1%A8%E6%A0%BC%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7.html" rel="alternate" type="text/html" title="表格导出数据检查工具" /><published>2023-04-26T00:00:00+08:00</published><updated>2023-04-26T00:00:00+08:00</updated><id>http://localhost:4000/2023/04/26/%E8%A1%A8%E6%A0%BC%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7</id><content type="html" xml:base="http://localhost:4000/2023/04/26/%E8%A1%A8%E6%A0%BC%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7.html"><![CDATA[<h2 id="项目简记">项目简记</h2>

<p>使用项目：《明日之后》</p>

<p>2023年4月 - now</p>

<h2 id="解决问题">解决问题</h2>

<p>2023年伊始，运营付费活动，已经出现两个一级事故，一个影响涉及千万额度，一个及时发现损失较小但性质恶劣，主要都是策划填表中数据填错而对应QA未及时发现导致的（涉及工作流程问题，更改频繁，导表检查未发现）。</p>

<p>因此，关键数值要导表检查过一遍（确保数据格式正确），生成py数据后再过一遍（确保具体数据正确合理）。</p>

<p>目前是根据相关的十几张表格进行关联，但是每次都要手动检查，而且有些数据是需要关联的，比如活动类型，活动版本，活动时间，活动奖励等等。</p>

<p>涉及的相关活动：</p>

<blockquote>
  <p>典藏武器, 典藏载具, 典藏时装, 典藏家具, 典藏蓝图, 典藏庄园, 幸运礼盒, 时尚品鉴, 不放回抽奖, 晶核抽奖, 集训礼包, 分阶段礼包 等 觉得很赞 (abtest, 海外地区不同奖池 等策划的小心思 紧随其后)</p>

  <p>可乐大亨, 南瓜大盗, 圣诞树装扮, 春节饭店, 玫瑰爱意, 樱花绽放 等 觉得很赞</p>
</blockquote>

<h2 id="实际方案">实际方案</h2>

<blockquote>
  <p>针对每个活动都有一些特殊处理，但大体上流程类似</p>
</blockquote>

<ul>
  <li>路径解析 + SVN自动更新：</li>
</ul>

<p>导表是有自己的一套规则，增删表和sheet需要手动记录, sheet中表头和实际数据是有工具按照之前记录进行生成的 (“def”, “table/sheet”, “data”)，而海外数据主要是生成对应_auto_oversea 之类的文件。</p>

<ul>
  <li>数据关联：</li>
</ul>

<p>在游戏中逻辑关联的数据是由多个文件共同组成，代码中分散调用。</p>

<p>实际活动中关联的数据很难一个个看的出来，这里特意提取表头关联的数据类似下面这种，做特殊处理：</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"活动显示配置表"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">{</span><span class="w">

</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"运营活动配置表.xlsx"</span><span class="p">,</span><span class="w">

</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"活动显示配置表"</span><span class="p">,</span><span class="w">

</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"活动类型"</span><span class="w">

</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">},</span><span class="w">

</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-幸运礼盒.xlsx"</span><span class="p">,</span><span class="w">

</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"基础配置"</span><span class="p">,</span><span class="w">

</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ID"</span><span class="w">

</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">},</span><span class="w">

</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"special"</span><span class="p">:</span><span class="w"> </span><span class="s2">"幸运礼盒2"</span><span class="w">
                    </span><span class="err">......</span><span class="w">
</span></code></pre></div></div>

<p>最后会生成关联数据，special和special_check是一些检查的关键词</p>

<p>数据检查：
目前是hard code，对易错点：代币，数值 做了数据检查
由于非常熟悉数值区间，并且开发时间非常紧张将就处理一下</p>

<h3 id="流程图">流程图</h3>

<pre><code class="language-mermaid">
graph TD
    A[Start] --&gt; huodong_conf[活动配置表遍历];
    json_conf[/配置数据/];
    json_conf -.- huodong_conf;
    huodong_conf --&gt; huodongs_judge{活动类型 &amp; 当前版本?};
    huodongs_judge -- Yes --&gt; huodong_dict["hddict:活动遍历"];
    huodong_dict --&gt; huodongs1[类型对应class];
    huodong_dict --&gt; huodongs2[/关联参数:int/tuple/];
    huodongs1 --&gt; svn_up[SVN数据更新];
    svn_up --&gt; get_data[获取全部表数据];
    get_data --&gt; get_data_conf[获取对应数据];
    json_conf -.- get_data_conf;
    get_data_conf --&gt; get_data_info[解析关键数据];
    huodongs2 -.- get_data_info;
    get_data_info --&gt; connect_data_info[/获取组合关联数据/];
    json_conf -.- connect_data_info;
    get_data_info --&gt; check_data[关键数据检查 list];
    connect_data_info -.- check_data;
    check_data --&gt; check_data_res{each 检查通过?};
    check_data_res -- No --&gt; message_fail[失败记录];
    check_data_res -- Yes --&gt; message_succ[成功记录];
    message_fail --&gt; check_data;
    message_succ --&gt; check_data;
    check_data_res --&gt; message_res[最终记录];
    message_res --&gt; info[通知消息];
    info --&gt; E[end];
</code></pre>

<h3 id="完整设计">完整设计</h3>

<blockquote>
  <p>没被催之前的一套完整设计方案(全自动，网站配置，可多人分开处理)</p>
</blockquote>

<ul>
  <li>自动配置生成参数</li>
</ul>

<p>os.walk 自动获取 对应脚本并记录
关联内容和数据检查抽象出来单独配置</p>

<ul>
  <li>网站配置</li>
</ul>

<p>接到奖励监控平台  或  前后端网站框架 已接open_id, 管理页面等通用模块
上述配置参数,  构建的配置项存入数据库</p>

<ul>
  <li>导表检查和导出检查匹配</li>
  <li>个人配置项，供相关策划和QA使用</li>
  <li>定时报警</li>
</ul>

<h2 id="配置项">配置项</h2>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"类型对照"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"幸运礼盒2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-幸运礼盒"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"典藏抽奖活动"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-典藏抽奖活动"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"限时建筑抽奖2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-限时建筑抽奖"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"配置活动"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"运营活动配置表"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"SVN"</span><span class="p">:</span><span class="w"> </span><span class="s2">"huodong_conf_data.py"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"活动显示配置表"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"活动开始时间"</span><span class="p">:</span><span class="w"> </span><span class="s2">"start_ts"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"活动结束时间"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_ts"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"活动编号"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"活动名称"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"活动类型"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hd_type"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"额外参数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"extra_param"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"关联"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"活动显示配置表"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"运营活动配置表.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"活动显示配置表"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"活动类型"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-幸运礼盒.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"基础配置"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ID"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"special"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"幸运礼盒2"</span><span class="p">],</span><span class="w">
                        </span><span class="nl">"param"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"参数"</span><span class="p">]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"运营活动配置表.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"活动显示配置表"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"活动类型"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-典藏抽奖活动.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"基础配置"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ID"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"special"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"典藏抽奖活动"</span><span class="p">],</span><span class="w">
                        </span><span class="nl">"param"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"参数"</span><span class="p">]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"运营活动配置表.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"活动显示配置表"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"活动类型"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-限时建筑抽奖.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"基础配置"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ID"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"special"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"限时建筑抽奖2"</span><span class="p">],</span><span class="w">
                        </span><span class="nl">"param"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"参数"</span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"抽奖-幸运礼盒"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"SVN"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"zh-hans"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"基础配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tmp/lucky_box_basic_conf_data.py"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"抽奖配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tmp/common_lottery_conf_data_lucky_box.py"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"阶段奖励配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tmp/lucky_box_stage_conf_data.py"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"zh-hant"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"en"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"jp"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"基础配置"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"阶段奖励配置ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stage_reward_conf_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"每日最大抽取次数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"max_per_day"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"活动期间最大抽取次数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"max_draw_times"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"道具随机奖池ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reward_pool_conf_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"抽奖组ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_group_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"奖池展示配置编号"</span><span class="p">:</span><span class="w"> </span><span class="s2">"show_reward_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"展示道具"</span><span class="p">:</span><span class="w"> </span><span class="s2">"show_item_ids"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"大奖判断"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jackpot_ids"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"下期代币"</span><span class="p">:</span><span class="w"> </span><span class="s2">"next_hd_token_id"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"阶段奖励配置表"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"阶段奖励ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"所需抽数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stage"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"奖励道具"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reward"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"单日限定发放次数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day_limit_count"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"单周限定发放次数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"week_limit_count"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"活动限定发放总次数报警"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alarm_total_limit_count"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"单日累计发放报警次数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alarm_limit_count"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"活动限定发放总次数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total_limit_count"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"抽奖配置"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"抽奖组ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_group_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"按钮抽取次数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_cnt"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"每日最大抽取次数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"max_lottery_cnt"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"本期投放代币"</span><span class="p">:</span><span class="w"> </span><span class="s2">"money_ids"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"抽奖代币配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_money_params"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"抽奖代币兑换配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"money_c_2_money_b"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"折扣券配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coupon_discount"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"关联"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"基础配置"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-幸运礼盒.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"基础配置"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"阶段奖励配置ID"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-幸运礼盒.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"阶段奖励配置"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"阶段奖励ID"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-幸运礼盒.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"基础配置"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"道具随机奖池ID"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"道具随机奖池表.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"道具随机奖池配置表"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ID"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-幸运礼盒.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"基础配置"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖组ID"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-幸运礼盒.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖配置"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖组ID"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"抽奖配置"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-幸运礼盒.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖配置"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"按钮抽取次数"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"excel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖-幸运礼盒.xlsx"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sheet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖配置"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"抽奖代币配置"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"special_check"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"抽奖-典藏抽奖活动"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"SVN"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"zh-hans"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"基础配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"super_fashion_lottery_conf_data.py"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"抽奖配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tmp/common_lottery_conf_data_super_fashion_lottery_hd.py"</span><span class="w">                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"zh-hant"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"en"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"jp"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"oversea"</span><span class="p">:{</span><span class="w">
                    </span><span class="nl">"基础配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oversea/tmp/super_fashion_lottery_conf_data_auto_oversea_data.py"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"基础配置"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"奖池ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"抽奖组ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_group_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"规则说明编号"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rule_id"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"抽奖配置"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"抽奖组ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_group_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"每日最大抽取次数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"max_lottery_cnt"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"最大抽取次数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total_max_lottery_cnt"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"本期投放代币"</span><span class="p">:</span><span class="w"> </span><span class="s2">"money_ids"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"抽奖代币配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_money_params"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"抽奖代币兑换配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"money_c_2_money_b"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"折扣券配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coupon_discount"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"关联"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"基础配置"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"抽奖配置"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"抽奖-限时建筑抽奖"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"SVN"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"zh-hans"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"抽取配置表"</span><span class="p">:</span><span class="w"> </span><span class="s2">"building_lottery_v2_conf_data.py"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"抽奖配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tmp/common_lottery_conf_data_building_lottery_hd_v2.py"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"zh-hant"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"en"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"jp"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"oversea"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"抽取配置表"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oversea/tmp/building_lottery_v2_conf_data_auto_oversea_data.py"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"抽取配置表"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"奖池ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_pool_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"抽奖组ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_group_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"家具模型展示"</span><span class="p">:</span><span class="w"> </span><span class="s2">"furniture_item_ids"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"抽奖配置"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"抽奖组ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_group_id"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"按钮抽取次数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_cnt"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"每日最大抽取次数"</span><span class="p">:</span><span class="w"> </span><span class="s2">"max_lottery_cnt"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"本期投放代币"</span><span class="p">:</span><span class="w"> </span><span class="s2">"money_ids"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"抽奖代币配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lottery_money_params"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"抽奖代币兑换配置"</span><span class="p">:</span><span class="w"> </span><span class="s2">"money_c_2_money_b"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"关联"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"抽取配置表"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"抽奖配置"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="其中一个类修改部分关键代码">其中一个类(修改部分关键代码)</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env/ python
# -*- coding:utf-8 -*-
</span>
<span class="kn">from</span> <span class="n">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>
<span class="kn">from</span> <span class="n">utils</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">LuckyBox</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">file_path_svn</span> <span class="o">=</span> <span class="nf">get_key_def_by_key_path</span><span class="p">([</span><span class="s">'配置活动'</span><span class="p">,</span> <span class="s">'抽奖-幸运礼盒'</span><span class="p">,</span> <span class="s">'SVN'</span><span class="p">,</span> <span class="s">'zh-hans'</span><span class="p">])</span>
        <span class="n">self</span><span class="p">.</span><span class="n">conf_key_def</span> <span class="o">=</span> <span class="nf">get_key_def_by_key_path</span><span class="p">([</span><span class="s">'配置活动'</span><span class="p">,</span> <span class="s">'抽奖-幸运礼盒'</span><span class="p">,</span> <span class="s">'基础配置'</span><span class="p">])</span>
        <span class="n">self</span><span class="p">.</span><span class="n">lottery_key_def</span> <span class="o">=</span> <span class="nf">get_key_def_by_key_path</span><span class="p">([</span><span class="s">'配置活动'</span><span class="p">,</span> <span class="s">'抽奖-幸运礼盒'</span><span class="p">,</span> <span class="s">'抽奖配置'</span><span class="p">])</span>
        <span class="n">self</span><span class="p">.</span><span class="n">stage_key_def</span> <span class="o">=</span> <span class="nf">get_key_def_by_key_path</span><span class="p">([</span><span class="s">'配置活动'</span><span class="p">,</span> <span class="s">'抽奖-幸运礼盒'</span><span class="p">,</span> <span class="s">'阶段奖励配置'</span><span class="p">])</span>
        <span class="n">self</span><span class="p">.</span><span class="n">connect</span> <span class="o">=</span> <span class="nf">get_key_def_by_key_path</span><span class="p">([</span><span class="s">'配置活动'</span><span class="p">,</span> <span class="s">'抽奖-幸运礼盒'</span><span class="p">,</span> <span class="s">'关联'</span><span class="p">])</span>
        <span class="n">self</span><span class="p">.</span><span class="n">lucky_box_cache</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        
        <span class="k">for</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">file_path_svn</span><span class="p">.</span><span class="nf">values</span><span class="p">():</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span><span class="s">'file_res\cdata'</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
            <span class="nf">svn_update</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">lucky_box</span> <span class="o">=</span> <span class="nf">get_file_dict</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">file_path_svn</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'基础配置'</span><span class="p">),</span> <span class="s">'data'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">lucky_box_lottery</span> <span class="o">=</span> <span class="nf">get_file_dict</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">file_path_svn</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'抽奖配置'</span><span class="p">),</span> <span class="s">'data'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">lucky_box_stage</span> <span class="o">=</span> <span class="nf">get_file_dict</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">file_path_svn</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'阶段奖励配置'</span><span class="p">),</span> <span class="s">'data'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">extra_param</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">""</span><span class="p">,</span> <span class="n">is_oversea</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        
        <span class="n">message</span> <span class="o">=</span> <span class="s">"%s-国服(幸运礼盒):</span><span class="se">\n\n</span><span class="s">"</span> <span class="o">%</span> <span class="n">name</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">is_oversea</span> <span class="k">else</span> <span class="s">"%s-海外(幸运礼盒):</span><span class="se">\n\n</span><span class="s">"</span> <span class="o">%</span> <span class="n">name</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="s">"幸运礼盒-国服:</span><span class="se">\n\n</span><span class="s">"</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">is_oversea</span> <span class="k">else</span> <span class="s">"幸运礼盒-海外:</span><span class="se">\n\n</span><span class="s">"</span>
   
        <span class="n">extra_param</span> <span class="o">+=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">is_oversea</span> <span class="k">else</span> <span class="mi">0</span>
    
        <span class="n">lucky_box_data</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">lucky_box</span><span class="p">[</span><span class="n">extra_param</span><span class="p">]</span>
        <span class="n">lucky_box_lottery_data</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">lucky_box_lottery</span><span class="p">[(</span><span class="s">'StoreLuckyBoxHDV2'</span><span class="p">,</span> <span class="n">lucky_box_data</span><span class="p">[</span><span class="s">'lottery_group_id'</span><span class="p">])]</span>
        <span class="n">lucky_box_stage_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">lucky_box_stage</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">lucky_box_data</span><span class="p">[</span><span class="s">'stage_reward_conf_id'</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">lucky_box_stage_data</span><span class="p">.</span><span class="nf">append</span><span class="p">((</span><span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">value</span><span class="p">[</span><span class="s">'reward'</span><span class="p">]))</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">conf_key_def</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">lucky_box_data</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>

                <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s">'lottery_group_id'</span><span class="p">:</span>
                    <span class="n">lottery_data</span> <span class="o">=</span> <span class="n">lucky_box_lottery_data</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">lucky_box_cache</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">lottery_data</span>
                    <span class="n">message</span> <span class="o">+=</span> <span class="s">"%s:</span><span class="se">\n</span><span class="s">%s"</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nf">get_info_from_dict</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">lottery_key_def</span><span class="p">,</span> <span class="n">lucky_box_lottery_data</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s">'stage_reward_conf_id'</span><span class="p">:</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">lucky_box_cache</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">lucky_box_stage_data</span>
                    <span class="n">message</span> <span class="o">+=</span> <span class="s">"%s:</span><span class="se">\n</span><span class="s">%s</span><span class="se">\n</span><span class="s">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">lucky_box_stage_data</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">lucky_box_cache</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">lucky_box_data</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
                    <span class="n">message</span> <span class="o">+=</span> <span class="s">"%s: %s</span><span class="se">\n</span><span class="s">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">lucky_box_data</span><span class="p">[</span><span class="n">value</span><span class="p">])</span>

        <span class="n">message</span> <span class="o">+=</span> <span class="n">self</span><span class="p">.</span><span class="nf">deal_connect_check</span><span class="p">(</span><span class="n">is_oversea</span><span class="p">)</span>

        <span class="nf">send_info</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">deal_connect_check</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">is_oversea</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        
        <span class="c1"># print(self.lucky_box_cache)
</span>        <span class="c1"># 关联1：抽奖配置 按钮抽取次数 与 抽奖配置 抽奖代币配置
</span>        <span class="n">lottery_group_id</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">lucky_box_cache</span><span class="p">[</span><span class="s">'lottery_group_id'</span><span class="p">]</span>
        <span class="n">money_ids</span> <span class="o">=</span> <span class="n">lottery_group_id</span><span class="p">[</span><span class="s">'money_ids'</span><span class="p">]</span>
        <span class="n">lottery_name</span> <span class="o">=</span> <span class="n">lottery_group_id</span><span class="p">[</span><span class="s">'lottery_name'</span><span class="p">]</span>
        <span class="n">lottery_cnt</span> <span class="o">=</span> <span class="n">lottery_group_id</span><span class="p">[</span><span class="s">'lottery_cnt'</span><span class="p">]</span>
        <span class="n">lottery_money_params</span> <span class="o">=</span> <span class="n">lottery_group_id</span><span class="p">[</span><span class="s">'lottery_money_params'</span><span class="p">]</span>

        <span class="n">message</span> <span class="o">=</span> <span class="s">"</span><span class="se">\n</span><span class="s">关联检查:</span><span class="se">\n</span><span class="s">"</span>

        <span class="n">has_error</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># 抽奖代币检查
</span>        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">lottery_money_params</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">money_ids</span><span class="p">:</span>
                <span class="n">has_error</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">message</span> <span class="o">+=</span> <span class="s">"抽奖代币配置错误: %s</span><span class="se">\n</span><span class="s">"</span> <span class="o">%</span> <span class="nf">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">has_error</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">+=</span> <span class="s">"抽奖代币配置检查通过: %s</span><span class="se">\n\n</span><span class="s">"</span> <span class="o">%</span> <span class="nf">str</span><span class="p">(</span><span class="n">money_ids</span><span class="p">)</span>

        <span class="c1"># 代币数值检查
</span>        <span class="n">cost</span> <span class="o">=</span> <span class="n">xinyongdian</span> <span class="k">if</span> <span class="n">is_oversea</span> <span class="k">else</span> <span class="n">lihe</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">lottery_cnt</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">lottery_cnt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">fee</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">lottery_money_params</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">lottery_cnt</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">message</span> <span class="o">+=</span> <span class="s">"按钮描述: %s</span><span class="se">\n</span><span class="s">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">lottery_name</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">message</span> <span class="o">+=</span> <span class="s">"抽奖次数: %s</span><span class="se">\n</span><span class="s">"</span> <span class="o">%</span> <span class="n">lottery_cnt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">message</span> <span class="o">+=</span> <span class="s">"抽奖代币: %s</span><span class="se">\n</span><span class="s">"</span> <span class="o">%</span> <span class="nf">str</span><span class="p">(</span><span class="n">lottery_money_params</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">message</span> <span class="o">+=</span> <span class="s">"每抽价格: %d (换算RMB: %f)</span><span class="se">\n</span><span class="s">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">fee</span><span class="p">,</span> <span class="nf">float</span><span class="p">(</span><span class="n">fee</span><span class="p">)</span><span class="o">*</span><span class="n">cost</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">message</span>        
</code></pre></div></div>

<h3 id="最终结果">最终结果</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>幸运礼盒-国服(幸运礼盒): 【数据已完全修改】

  

阶段奖励配置ID:

[(5, (150496, 2)), (25, (150141, 10)), (50, (150059, 600)), (150, (151784, 15)), (300, (240034, 1))]

每日最大抽取次数: 50

活动期间最大抽取次数: 2000

道具随机奖池ID: 390539

抽奖组ID:

-按钮抽取次数: (1, 10)

-每日最大抽取次数: 50

-本期投放代币: (150058, 152355)

-抽奖代币配置: ((152355, 12), (152355, 100))

-抽奖代币兑换配置: {152355: ((150058, 10),)}

-折扣券配置: (((152385, 0.5),), ((152386, 0.6),))

奖池展示配置编号: 1

展示道具: (103248, 103245, 103204, 103201)

下期代币: 152387

  

关联检查:

抽奖代币配置检查通过: (150058, 152355)

  

按钮描述: 初级礼盒

抽奖次数: 1

抽奖代币: (152355, 12)

每抽价格: 12 (换算RMB: 10.010299)

按钮描述: 珍贵礼盒

抽奖次数: 10

抽奖代币: (152355, 100)

每抽价格: 10 (换算RMB: 8.341916)

</code></pre></div></div>]]></content><author><name>FrozzenCJ</name><email>joeychou0805@gmail.com</email></author><category term="Work" /><category term="Tools" /><summary type="html"><![CDATA[项目简记 使用项目：《明日之后》 2023年4月 - now 解决问题 2023年伊始，运营付费活动，已经出现两个一级事故，一个影响涉及千万额度，一个及时发现损失较小但性质恶劣，主要都是策划填表中数据填错而对应QA未及时发现导致的（涉及工作流程问题，更改频繁，导表检查未发现）。 因此，关键数值要导表检查过一遍（确保数据格式正确），生成py数据后再过一遍（确保具体数据正确合理）。 目前是根据相关的十几张表格进行关联，但是每次都要手动检查，而且有些数据是需要关联的，比如活动类型，活动版本，活动时间，活动奖励等等。 涉及的相关活动： 典藏武器, 典藏载具, 典藏时装, 典藏家具, 典藏蓝图, 典藏庄园, 幸运礼盒, 时尚品鉴, 不放回抽奖, 晶核抽奖, 集训礼包, 分阶段礼包 等 觉得很赞 (abtest, 海外地区不同奖池 等策划的小心思 紧随其后) 可乐大亨, 南瓜大盗, 圣诞树装扮, 春节饭店, 玫瑰爱意, 樱花绽放 等 觉得很赞 实际方案 针对每个活动都有一些特殊处理，但大体上流程类似 路径解析 + SVN自动更新： 导表是有自己的一套规则，增删表和sheet需要手动记录, sheet中表头和实际数据是有工具按照之前记录进行生成的 (“def”, “table/sheet”, “data”)，而海外数据主要是生成对应_auto_oversea 之类的文件。 数据关联： 在游戏中逻辑关联的数据是由多个文件共同组成，代码中分散调用。 实际活动中关联的数据很难一个个看的出来，这里特意提取表头关联的数据类似下面这种，做特殊处理： "活动显示配置表": [                     {                         "from": {                             "excel": "运营活动配置表.xlsx",                             "sheet": "活动显示配置表",                             "key": "活动类型"                         },                         "to": {                             "excel": "抽奖-幸运礼盒.xlsx",                             "sheet": "基础配置",                             "key": "ID"                         },                         "special": "幸运礼盒2" ...... 最后会生成关联数据，special和special_check是一些检查的关键词 数据检查： 目前是hard code，对易错点：代币，数值 做了数据检查 由于非常熟悉数值区间，并且开发时间非常紧张将就处理一下 流程图 graph TD A[Start] --&gt; huodong_conf[活动配置表遍历]; json_conf[/配置数据/]; json_conf -.- huodong_conf; huodong_conf --&gt; huodongs_judge{活动类型 &amp; 当前版本?}; huodongs_judge -- Yes --&gt; huodong_dict["hddict:活动遍历"]; huodong_dict --&gt; huodongs1[类型对应class]; huodong_dict --&gt; huodongs2[/关联参数:int/tuple/]; huodongs1 --&gt; svn_up[SVN数据更新]; svn_up --&gt; get_data[获取全部表数据]; get_data --&gt; get_data_conf[获取对应数据]; json_conf -.- get_data_conf; get_data_conf --&gt; get_data_info[解析关键数据]; huodongs2 -.- get_data_info; get_data_info --&gt; connect_data_info[/获取组合关联数据/]; json_conf -.- connect_data_info; get_data_info --&gt; check_data[关键数据检查 list]; connect_data_info -.- check_data; check_data --&gt; check_data_res{each 检查通过?}; check_data_res -- No --&gt; message_fail[失败记录]; check_data_res -- Yes --&gt; message_succ[成功记录]; message_fail --&gt; check_data; message_succ --&gt; check_data; check_data_res --&gt; message_res[最终记录]; message_res --&gt; info[通知消息]; info --&gt; E[end]; 完整设计 没被催之前的一套完整设计方案(全自动，网站配置，可多人分开处理) 自动配置生成参数 os.walk 自动获取 对应脚本并记录 关联内容和数据检查抽象出来单独配置 网站配置 接到奖励监控平台 或 前后端网站框架 已接open_id, 管理页面等通用模块 上述配置参数, 构建的配置项存入数据库 导表检查和导出检查匹配 个人配置项，供相关策划和QA使用 定时报警 配置项 { "类型对照":{ "幸运礼盒2": "抽奖-幸运礼盒", "典藏抽奖活动": "抽奖-典藏抽奖活动", "限时建筑抽奖2": "抽奖-限时建筑抽奖" }, "配置活动": { "运营活动配置表": { "SVN": "huodong_conf_data.py", "活动显示配置表": { "活动开始时间": "start_ts", "活动结束时间": "end_ts", "活动编号": "id", "活动名称": "name", "活动类型": "hd_type", "额外参数": "extra_param" }, "关联": { "活动显示配置表": [ { "from": { "excel": "运营活动配置表.xlsx", "sheet": "活动显示配置表", "key": "活动类型" }, "to": { "excel": "抽奖-幸运礼盒.xlsx", "sheet": "基础配置", "key": "ID" }, "special": ["幸运礼盒2"], "param": ["参数"] }, { "from": { "excel": "运营活动配置表.xlsx", "sheet": "活动显示配置表", "key": "活动类型" }, "to": { "excel": "抽奖-典藏抽奖活动.xlsx", "sheet": "基础配置", "key": "ID" }, "special": ["典藏抽奖活动"], "param": ["参数"] }, { "from": { "excel": "运营活动配置表.xlsx", "sheet": "活动显示配置表", "key": "活动类型" }, "to": { "excel": "抽奖-限时建筑抽奖.xlsx", "sheet": "基础配置", "key": "ID" }, "special": ["限时建筑抽奖2"], "param": ["参数"] } ] } }, "抽奖-幸运礼盒": { "SVN": { "zh-hans": { "基础配置": "tmp/lucky_box_basic_conf_data.py", "抽奖配置": "tmp/common_lottery_conf_data_lucky_box.py", "阶段奖励配置": "tmp/lucky_box_stage_conf_data.py" }, "zh-hant": {}, "en": {}, "jp": {} }, "基础配置": { "ID": "id", "阶段奖励配置ID": "stage_reward_conf_id", "每日最大抽取次数": "max_per_day", "活动期间最大抽取次数": "max_draw_times", "道具随机奖池ID": "reward_pool_conf_id", "抽奖组ID": "lottery_group_id", "奖池展示配置编号": "show_reward_id", "展示道具": "show_item_ids", "大奖判断": "jackpot_ids", "下期代币": "next_hd_token_id" }, "阶段奖励配置表": { "阶段奖励ID": "id", "所需抽数": "stage", "奖励道具": "reward", "单日限定发放次数": "day_limit_count", "单周限定发放次数": "week_limit_count", "活动限定发放总次数报警": "alarm_total_limit_count", "单日累计发放报警次数": "alarm_limit_count", "活动限定发放总次数": "total_limit_count" }, "抽奖配置": { "抽奖组ID": "lottery_group_id", "按钮抽取次数": "lottery_cnt", "每日最大抽取次数": "max_lottery_cnt", "本期投放代币": "money_ids", "抽奖代币配置": "lottery_money_params", "抽奖代币兑换配置": "money_c_2_money_b", "折扣券配置": "coupon_discount" }, "关联": { "基础配置": [ { "from": { "excel": "抽奖-幸运礼盒.xlsx", "sheet": "基础配置", "key": "阶段奖励配置ID" }, "to": { "excel": "抽奖-幸运礼盒.xlsx", "sheet": "阶段奖励配置", "key": "阶段奖励ID" } }, { "from": { "excel": "抽奖-幸运礼盒.xlsx", "sheet": "基础配置", "key": "道具随机奖池ID" }, "to": { "excel": "道具随机奖池表.xlsx", "sheet": "道具随机奖池配置表", "key": "ID" } }, { "from": { "excel": "抽奖-幸运礼盒.xlsx", "sheet": "基础配置", "key": "抽奖组ID" }, "to": { "excel": "抽奖-幸运礼盒.xlsx", "sheet": "抽奖配置", "key": "抽奖组ID" } } ], "抽奖配置": [ { "from": { "excel": "抽奖-幸运礼盒.xlsx", "sheet": "抽奖配置", "key": "按钮抽取次数" }, "to": { "excel": "抽奖-幸运礼盒.xlsx", "sheet": "抽奖配置", "key": "抽奖代币配置" }, "special_check": "" } ] } }, "抽奖-典藏抽奖活动": { "SVN": { "zh-hans": { "基础配置": "super_fashion_lottery_conf_data.py", "抽奖配置": "tmp/common_lottery_conf_data_super_fashion_lottery_hd.py" }, "zh-hant": {}, "en": {}, "jp": {}, "oversea":{ "基础配置": "oversea/tmp/super_fashion_lottery_conf_data_auto_oversea_data.py" } }, "基础配置": { "ID": "id", "奖池ID": "lottery_id", "抽奖组ID": "lottery_group_id", "规则说明编号": "rule_id" }, "抽奖配置": { "抽奖组ID": "lottery_group_id", "每日最大抽取次数": "max_lottery_cnt", "最大抽取次数": "total_max_lottery_cnt", "本期投放代币": "money_ids", "抽奖代币配置": "lottery_money_params", "抽奖代币兑换配置": "money_c_2_money_b", "折扣券配置": "coupon_discount" }, "关联": { "基础配置": [ ], "抽奖配置": [ ] } }, "抽奖-限时建筑抽奖": { "SVN": { "zh-hans": { "抽取配置表": "building_lottery_v2_conf_data.py", "抽奖配置": "tmp/common_lottery_conf_data_building_lottery_hd_v2.py" }, "zh-hant": {}, "en": {}, "jp": {}, "oversea": { "抽取配置表": "oversea/tmp/building_lottery_v2_conf_data_auto_oversea_data.py" } }, "抽取配置表": { "ID": "id", "奖池ID": "lottery_pool_id", "抽奖组ID": "lottery_group_id", "家具模型展示": "furniture_item_ids" }, "抽奖配置": { "抽奖组ID": "lottery_group_id", "按钮抽取次数": "lottery_cnt", "每日最大抽取次数": "max_lottery_cnt", "本期投放代币": "money_ids", "抽奖代币配置": "lottery_money_params", "抽奖代币兑换配置": "money_c_2_money_b" }, "关联": { "抽取配置表": [ ], "抽奖配置": [ ] } } } } 其中一个类(修改部分关键代码) #!/usr/bin/env/ python # -*- coding:utf-8 -*- from __future__ import absolute_import from utils import * class LuckyBox(object): def __init__(self): self.file_path_svn = get_key_def_by_key_path(['配置活动', '抽奖-幸运礼盒', 'SVN', 'zh-hans']) self.conf_key_def = get_key_def_by_key_path(['配置活动', '抽奖-幸运礼盒', '基础配置']) self.lottery_key_def = get_key_def_by_key_path(['配置活动', '抽奖-幸运礼盒', '抽奖配置']) self.stage_key_def = get_key_def_by_key_path(['配置活动', '抽奖-幸运礼盒', '阶段奖励配置']) self.connect = get_key_def_by_key_path(['配置活动', '抽奖-幸运礼盒', '关联']) self.lucky_box_cache = {} def update(self): for file_name in self.file_path_svn.values(): file_name = os.path.join(BASE_DIR,'file_res\cdata', file_name) svn_update(file_name) def get_data(self): self.lucky_box = get_file_dict(self.file_path_svn.get('基础配置'), 'data') self.lucky_box_lottery = get_file_dict(self.file_path_svn.get('抽奖配置'), 'data') self.lucky_box_stage = get_file_dict(self.file_path_svn.get('阶段奖励配置'), 'data') def info(self, extra_param, name="", is_oversea=False): message = "%s-国服(幸运礼盒):\n\n" % name if not is_oversea else "%s-海外(幸运礼盒):\n\n" % name if not name: message = "幸运礼盒-国服:\n\n" if not is_oversea else "幸运礼盒-海外:\n\n" extra_param += 1 if is_oversea else 0 lucky_box_data = self.lucky_box[extra_param] lucky_box_lottery_data = self.lucky_box_lottery[('StoreLuckyBoxHDV2', lucky_box_data['lottery_group_id'])] lucky_box_stage_data = [] for key, value in self.lucky_box_stage.items(): if lucky_box_data['stage_reward_conf_id'] == key[0]: lucky_box_stage_data.append((key[1], value['reward'])) for key, value in self.conf_key_def.items(): if lucky_box_data.get(value): if value == 'lottery_group_id': lottery_data = lucky_box_lottery_data self.lucky_box_cache[value] = lottery_data message += "%s:\n%s" % (key, get_info_from_dict(self.lottery_key_def, lucky_box_lottery_data)) elif value == 'stage_reward_conf_id': self.lucky_box_cache[value] = lucky_box_stage_data message += "%s:\n%s\n" % (key, lucky_box_stage_data) else: self.lucky_box_cache[value] = lucky_box_data[value] message += "%s: %s\n" % (key, lucky_box_data[value]) message += self.deal_connect_check(is_oversea) send_info(message) def deal_connect_check(self, is_oversea=False) -&gt; str: # print(self.lucky_box_cache) # 关联1：抽奖配置 按钮抽取次数 与 抽奖配置 抽奖代币配置 lottery_group_id = self.lucky_box_cache['lottery_group_id'] money_ids = lottery_group_id['money_ids'] lottery_name = lottery_group_id['lottery_name'] lottery_cnt = lottery_group_id['lottery_cnt'] lottery_money_params = lottery_group_id['lottery_money_params'] message = "\n关联检查:\n" has_error = False # 抽奖代币检查 for m in lottery_money_params: if m[0] not in money_ids: has_error = True message += "抽奖代币配置错误: %s\n" % str(m) if not has_error: message += "抽奖代币配置检查通过: %s\n\n" % str(money_ids) # 代币数值检查 cost = xinyongdian if is_oversea else lihe for i in range(len(lottery_cnt)): if lottery_cnt[i] == 0: continue fee = int(lottery_money_params[i][1]/lottery_cnt[i]) message += "按钮描述: %s\n" % (lottery_name[i]) message += "抽奖次数: %s\n" % lottery_cnt[i] message += "抽奖代币: %s\n" % str(lottery_money_params[i]) message += "每抽价格: %d (换算RMB: %f)\n" % (fee, float(fee)*cost) return message 最终结果 幸运礼盒-国服(幸运礼盒): 【数据已完全修改】 阶段奖励配置ID: [(5, (150496, 2)), (25, (150141, 10)), (50, (150059, 600)), (150, (151784, 15)), (300, (240034, 1))] 每日最大抽取次数: 50 活动期间最大抽取次数: 2000 道具随机奖池ID: 390539 抽奖组ID: -按钮抽取次数: (1, 10) -每日最大抽取次数: 50 -本期投放代币: (150058, 152355) -抽奖代币配置: ((152355, 12), (152355, 100)) -抽奖代币兑换配置: {152355: ((150058, 10),)} -折扣券配置: (((152385, 0.5),), ((152386, 0.6),)) 奖池展示配置编号: 1 展示道具: (103248, 103245, 103204, 103201) 下期代币: 152387 关联检查: 抽奖代币配置检查通过: (150058, 152355) 按钮描述: 初级礼盒 抽奖次数: 1 抽奖代币: (152355, 12) 每抽价格: 12 (换算RMB: 10.010299) 按钮描述: 珍贵礼盒 抽奖次数: 10 抽奖代币: (152355, 100) 每抽价格: 10 (换算RMB: 8.341916)]]></summary></entry><entry><title type="html">游戏社交玩法思考</title><link href="http://localhost:4000/2023/03/29/%E7%A4%BE%E4%BA%A4%E7%8E%A9%E6%B3%95.html" rel="alternate" type="text/html" title="游戏社交玩法思考" /><published>2023-03-29T00:00:00+08:00</published><updated>2023-03-29T00:00:00+08:00</updated><id>http://localhost:4000/2023/03/29/%E7%A4%BE%E4%BA%A4%E7%8E%A9%E6%B3%95</id><content type="html" xml:base="http://localhost:4000/2023/03/29/%E7%A4%BE%E4%BA%A4%E7%8E%A9%E6%B3%95.html"><![CDATA[<p>第一种，前社交关系，这种模式下人与人只是被系统放在一起，大多数情况下形成的都是无实质社交关系。</p>

<p>玩家间无需知道社交对象是谁，无需知道社交对象的特点，也不需要产生任何配合，故不存在有效社交行为。玩家实际上仍停留在与系统、NPC进行互动的阶段，例如添加好友一键领金币，或是加入公会领取奖励，玩家实质上并未与其他人产生社交互动，实质上仍为个人玩法。</p>

<p>第二种，弱社交关系——桥接（Bridging ties），强调人与人之间形成一种广泛而不深度的社会关系，该关系下的社交行为完全由单次或短期的利益行为（组队/交易）构成，玩家间缺乏情感互动，也缺乏长期联系，关系非常脆弱，玩家随时可以更换社交对象并与其他玩家建立新的桥接关系，像Among us等线上随机组队的对抗游戏，也是通过快速但脆弱的联系增加玩家间接触及关系网刷新的频率。</p>

<p>第三种，强社交关系——链结（Bonding ties），人与人之间真正形成了一种稳固的亲密关系。玩家通过链结产生了彼此之间的强依赖，随着长期的合作不断加强彼此的联系，开启新的玩法体验、实现游戏体验乐趣最大化。</p>

<p>如美国传播学教授Mia Consalvo就游戏中的社交工具研究（2011）中提及，目前许多游戏提供的交流工具难以达到深度交流，流于形式，包括但不限于无意义的讨论、交往及信息交换。</p>

<p>以《剑与远征》为例，其作为一个放置+卡牌产品，本身为轻社交导向，即使游戏内提供相对完善的社交工具，并且官方在后续运营过程中不断丰富、优化玩家可使用的社交工具，但由于玩法本质仍为单机，故玩家间社交联系依旧停留于单向阶段，也就无法在玩家间形成有效“链结“关系。</p>

<p>有社交玩法，也并不等同于形成“链结”
 Mia Consalvo（2011）还在其研究中提及，大量社交游戏正做着无意义的玩家互动，是对社交性的嘲弄，而非真情表达。</p>

<p>以《新诛仙手游》为例，其作为一款MMO产品，游戏内大量堆砌社交玩法，初步满足玩家双向交互的条件，但实际社交生态中，玩家仅将社交系统作为数值提升的工具，对于社交的对象与社交的质量都没有进一步的追求，进而缺乏深层的情感联系。究其根本则是由于不收敛的养成数值，导致玩家行为以纯数值导向而忽视依恋关系。</p>

<p>其实“链结”可以理解成用户筛选后的结果，而并非假设。</p>

<p>游戏环境下衍生的“链结”价值
 3.2.1 社群文化发展
 此时“链结”关系作为一个中介影响因素，通过增强玩家对游戏的代入感以及归属感，从而推动玩家自发在社群传播游戏的内容与文化。得益于“链结”关系带来的对游戏内门派、阵容、角色强大的认同感及感情归属，玩家自发地将自身情感代入进游戏内，更愿意进行角色特征的刻画与创作，从而推动社群文化的传播与发展。</p>

<p>3.2.2 现实关系迁移
 同样，“链结”关系作为一个中介，通过高质量的游戏体验提升玩家对游戏的评价，从而拉升玩家推荐意愿。以《光遇》为例，玩家若在游戏内获得了深度社交体验，将会影响其对该游戏的评价，从而更愿意将《光遇》推荐给其他朋友，这也是目前《光遇》拥有非常优秀的新增的一部分原因。</p>

<p>评论：</p>

<blockquote>
  <p>其实我们可以换个角度去思考，这部分属性的玩家是不是我们要去推动“链结”的重点对象？因为moba游戏乃至大部分竞技游戏，玩家画像和生态并不只有“玩家偏好胜负、快节奏战斗、独狼”等，我记得18年G78台服报告中提到“台湾核心玩家特征：拥有较强的社交倾向，喜欢展示自我，主动积极和陌生人交流开黑，对于组织依赖和粘性强，但产品内辅助玩家社交的系统较少”。因而我们可以根据不同群体、地区或者环境等，考虑优先选择做符合社交属性用户的“链结”，后续怎么把“链结”在游戏里面能形成更大的规模和影响力，去拓展其他画像的群体，正是我们后续不断探索和研究的方向。</p>
</blockquote>

<p>文章中可能有一个观点没有传达到位，我们讨论“链结”的前提，应该是建立在产品预期就要做社交的前提下。如果产品本来预期就没打算做社交，“链结”其实可以看成一个课外读物。就比方说目前市场上很多卡牌、放置等类型的游戏，产品预期就没打算做社交，中间过程也不依赖社交，玩家画像和社交属性不契合，这时候去谈“链结”就有点伤感。就正如文中提到的《剑与远征》这款产品，没有社交的预期，筛选出来的用户当然社交属性很差，再在后续运营中“半路出家”加入了大量社交玩法、设计的尝试，效果和数据固然不理想，更别谈用户能达到“链结”。因而我们并非说全部游戏都要做“链结”，因为本来就没有社交预期的产品，往后强塞很多系统、设计等进去性价比很差。我们重点探索的方向是：本来就想做社交属性的产品，怎么能让更多“桥接”转化成“链结”，甚至进一步稳固“链结”，扩大游戏中“链结”的规模。</p>

<p>游戏毕竟是游戏，如果游戏能和即时社交结合起来，这种“链结”关系会不会更牢固？</p>

<blockquote>
  <p>毕竟打开手机的频率是远远大于打开游戏的，如果我打开手机就能收到游戏内好友消息的推送，是否会进一步挺高玩家打开游戏的概率？</p>
</blockquote>

<p>感谢这位同学，提的问题很有想法。</p>

<p>我这里结合之前三国志战略版制作人分享的说法和个人见解跟你探讨一下：</p>

<p>游戏里的社交功能不做那么方便和细致，是希望用户通过其他日常沟通软件（如微信、QQ等）进行社交，让“链结”从游戏内到游戏外进一步加强。如果游戏社交功能做得很丰富很全面（比如你提到的可以实时收到好友消息推送），完全不用依赖其他社交软件，你可以从另一方面去想，这样用户要是流失了游戏卸载了，对方就很难找回来了。因而，一个好的社交属性的游戏产品，可以利用和依赖其他社交沟通软件，让游戏内和外社交氛围更强大，让“链结”更牢固。</p>]]></content><author><name>FrozzenCJ</name><email>joeychou0805@gmail.com</email></author><category term="Game" /><category term="Design" /><summary type="html"><![CDATA[第一种，前社交关系，这种模式下人与人只是被系统放在一起，大多数情况下形成的都是无实质社交关系。 玩家间无需知道社交对象是谁，无需知道社交对象的特点，也不需要产生任何配合，故不存在有效社交行为。玩家实际上仍停留在与系统、NPC进行互动的阶段，例如添加好友一键领金币，或是加入公会领取奖励，玩家实质上并未与其他人产生社交互动，实质上仍为个人玩法。 第二种，弱社交关系——桥接（Bridging ties），强调人与人之间形成一种广泛而不深度的社会关系，该关系下的社交行为完全由单次或短期的利益行为（组队/交易）构成，玩家间缺乏情感互动，也缺乏长期联系，关系非常脆弱，玩家随时可以更换社交对象并与其他玩家建立新的桥接关系，像Among us等线上随机组队的对抗游戏，也是通过快速但脆弱的联系增加玩家间接触及关系网刷新的频率。 第三种，强社交关系——链结（Bonding ties），人与人之间真正形成了一种稳固的亲密关系。玩家通过链结产生了彼此之间的强依赖，随着长期的合作不断加强彼此的联系，开启新的玩法体验、实现游戏体验乐趣最大化。 如美国传播学教授Mia Consalvo就游戏中的社交工具研究（2011）中提及，目前许多游戏提供的交流工具难以达到深度交流，流于形式，包括但不限于无意义的讨论、交往及信息交换。 以《剑与远征》为例，其作为一个放置+卡牌产品，本身为轻社交导向，即使游戏内提供相对完善的社交工具，并且官方在后续运营过程中不断丰富、优化玩家可使用的社交工具，但由于玩法本质仍为单机，故玩家间社交联系依旧停留于单向阶段，也就无法在玩家间形成有效“链结“关系。 有社交玩法，也并不等同于形成“链结” Mia Consalvo（2011）还在其研究中提及，大量社交游戏正做着无意义的玩家互动，是对社交性的嘲弄，而非真情表达。 以《新诛仙手游》为例，其作为一款MMO产品，游戏内大量堆砌社交玩法，初步满足玩家双向交互的条件，但实际社交生态中，玩家仅将社交系统作为数值提升的工具，对于社交的对象与社交的质量都没有进一步的追求，进而缺乏深层的情感联系。究其根本则是由于不收敛的养成数值，导致玩家行为以纯数值导向而忽视依恋关系。 其实“链结”可以理解成用户筛选后的结果，而并非假设。 游戏环境下衍生的“链结”价值 3.2.1 社群文化发展 此时“链结”关系作为一个中介影响因素，通过增强玩家对游戏的代入感以及归属感，从而推动玩家自发在社群传播游戏的内容与文化。得益于“链结”关系带来的对游戏内门派、阵容、角色强大的认同感及感情归属，玩家自发地将自身情感代入进游戏内，更愿意进行角色特征的刻画与创作，从而推动社群文化的传播与发展。 3.2.2 现实关系迁移 同样，“链结”关系作为一个中介，通过高质量的游戏体验提升玩家对游戏的评价，从而拉升玩家推荐意愿。以《光遇》为例，玩家若在游戏内获得了深度社交体验，将会影响其对该游戏的评价，从而更愿意将《光遇》推荐给其他朋友，这也是目前《光遇》拥有非常优秀的新增的一部分原因。 评论： 其实我们可以换个角度去思考，这部分属性的玩家是不是我们要去推动“链结”的重点对象？因为moba游戏乃至大部分竞技游戏，玩家画像和生态并不只有“玩家偏好胜负、快节奏战斗、独狼”等，我记得18年G78台服报告中提到“台湾核心玩家特征：拥有较强的社交倾向，喜欢展示自我，主动积极和陌生人交流开黑，对于组织依赖和粘性强，但产品内辅助玩家社交的系统较少”。因而我们可以根据不同群体、地区或者环境等，考虑优先选择做符合社交属性用户的“链结”，后续怎么把“链结”在游戏里面能形成更大的规模和影响力，去拓展其他画像的群体，正是我们后续不断探索和研究的方向。 文章中可能有一个观点没有传达到位，我们讨论“链结”的前提，应该是建立在产品预期就要做社交的前提下。如果产品本来预期就没打算做社交，“链结”其实可以看成一个课外读物。就比方说目前市场上很多卡牌、放置等类型的游戏，产品预期就没打算做社交，中间过程也不依赖社交，玩家画像和社交属性不契合，这时候去谈“链结”就有点伤感。就正如文中提到的《剑与远征》这款产品，没有社交的预期，筛选出来的用户当然社交属性很差，再在后续运营中“半路出家”加入了大量社交玩法、设计的尝试，效果和数据固然不理想，更别谈用户能达到“链结”。因而我们并非说全部游戏都要做“链结”，因为本来就没有社交预期的产品，往后强塞很多系统、设计等进去性价比很差。我们重点探索的方向是：本来就想做社交属性的产品，怎么能让更多“桥接”转化成“链结”，甚至进一步稳固“链结”，扩大游戏中“链结”的规模。 游戏毕竟是游戏，如果游戏能和即时社交结合起来，这种“链结”关系会不会更牢固？ 毕竟打开手机的频率是远远大于打开游戏的，如果我打开手机就能收到游戏内好友消息的推送，是否会进一步挺高玩家打开游戏的概率？ 感谢这位同学，提的问题很有想法。 我这里结合之前三国志战略版制作人分享的说法和个人见解跟你探讨一下： 游戏里的社交功能不做那么方便和细致，是希望用户通过其他日常沟通软件（如微信、QQ等）进行社交，让“链结”从游戏内到游戏外进一步加强。如果游戏社交功能做得很丰富很全面（比如你提到的可以实时收到好友消息推送），完全不用依赖其他社交软件，你可以从另一方面去想，这样用户要是流失了游戏卸载了，对方就很难找回来了。因而，一个好的社交属性的游戏产品，可以利用和依赖其他社交沟通软件，让游戏内和外社交氛围更强大，让“链结”更牢固。]]></summary></entry><entry><title type="html">AIGC应用思考和实践</title><link href="http://localhost:4000/2023/03/02/%E7%BB%93%E5%90%88AI%E7%9A%84%E8%AE%BE%E8%AE%A1.html" rel="alternate" type="text/html" title="AIGC应用思考和实践" /><published>2023-03-02T00:00:00+08:00</published><updated>2023-03-02T00:00:00+08:00</updated><id>http://localhost:4000/2023/03/02/%E7%BB%93%E5%90%88AI%E7%9A%84%E8%AE%BE%E8%AE%A1</id><content type="html" xml:base="http://localhost:4000/2023/03/02/%E7%BB%93%E5%90%88AI%E7%9A%84%E8%AE%BE%E8%AE%A1.html"><![CDATA[<blockquote>
  <p>我能想到, 别人可能也想到, 但脑子, 嘴和手长在我身上</p>
</blockquote>

<h2 id="舆论反馈辅助决策">舆论反馈辅助决策</h2>

<p>评分+评论： 各游戏平台，各
纯评论：
评论文章：</p>

<p>可结合工具： ChatGPT 4.0 +
python (脚本化)</p>

<h3 id="先说结论">先说结论</h3>

<h4 id="运营上客观但价值转化率其实不够-对策划后续设计的决定性价值不足"><strong>运营上客观但价值转化率其实不够, 对策划后续设计的决定性价值不足</strong></h4>

<p><strong>一测， 二测，非氪金的时候，节省脑力消化文字，更多精力放在思考优化</strong></p>

<p>很多评论实际上大同小异</p>

<p>注重核心用户的评论和评分, 本来每个游戏就是有壁垒和独特性, 因此筛选用户也是非常重要的, 提升核心用户和潜在用户的诉求权重</p>

<p>问题: TapTap或者Steam 上面的评分和评论在一定程度上并不匹配, 目标用户的评论权重和非目标用户的评论权重</p>

<p>米の提纯：
米游社</p>

<p>网易の提纯：
大神</p>

<h3 id="举个栗子">举个栗子</h3>

<p>Tap tap上崩坏的评分+评论：</p>

<p><strong><img src="/assets/images/img/Pasted image 20230428144002.png" alt="" /></strong></p>

<p><img src="/assets/images/img/Pasted image 20230428143946.png" alt="" /></p>

<p><img src="/assets/images/img/Pasted image 20230428143558.png" alt="" /></p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
请概述以下评论核心论点，阐述其情绪，并从1分到5分（坏到好），来客观对崩坏星穹铁道进行分析打分：

我路人，没玩过原神，纯看热度准备试试。
PC端玩的，手机也下载了游戏和米游社，也就为了蚊子大点的福利，汗
玩到现在十来个小时，总体感觉一般吧。
一般在哪:
1.这游戏纯单机，后续似乎也完全没有啥社交部分的内容。唯一有个好友援助，基本毫无影响。
地图除了精致华丽，乐趣基本没有。解谜内容和那个拼图小游戏，可有可无吧
2.强迫症，收集党慎入。单说地图那些宝箱，书籍，你要是不去搜索攻略，难度倒是不太高，但真的很耗费时间。
照着攻略来，倒是方便，但依然很“麻烦”，
多少让人心累。。。
3.剧情一般，但完全不能跳过。
这意味着你要是单纯来玩游戏，单纯体验“打架”的，绝对不行。
再开个小号或者换服务器啥的，也很不行，折磨。
剧情和对话我真有好好看，但确实一般，除了文本内容，有很多致敬、恶搞、整活啥的，算是有点意思
4.数值部分，我的体验是“平滑”。没有任何爽点、也无槽点，堪称策略游戏。
(氪佬和平民玩的是两个游戏，不谈。
网游和手游，如果不卖数值，是不可能简单暴力且无脑的赚钱的。
抽卡本质上是卖数值，只不过不全是数值)
----------
我的总体评价是:
游戏品质无需多说，
游戏类型不是传统抽卡游戏，跑图和战斗的体验，更像魂类，有点硬核。
游戏内容，看点在于文本和角色，其余负分不至于，但相比就无话可谈。
----------
题外话，和我玩过的游戏比较，我个人觉得像是回合制的神界原罪。
------
忘记说了，这游戏里不能跳，妥妥差评，三星评价扣一星吧。

</code></pre></div></div>

<p>经过提纯：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>核心论点：评论者对崩坏星穹铁道的评价是一般，主要观点如下：



游戏缺乏社交元素，地图解谜和拼图游戏可有可无。

收集内容耗时，对强迫症和收集党不友好。

剧情一般，不能跳过，不适合只想体验战斗的玩家。

数值体验平滑，没有高潮和低谷。


情绪：评论者对游戏的情绪是中立偏负面。


分析打分：从1分到5分（坏到好），评论者给游戏打3分，主要因为游戏不能跳过。
</code></pre></div></div>

<p>明显并非是目标用户，分数给低了，按照同样的格式（prompt）选择其他评论：</p>

<p><img src="/assets/images/img/Pasted image 20230428143835.png" alt="" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>和三测几乎一模一样，意料之中。
先给自己叠个甲，以下基于主观臆断，不一定是对的。
剧情🍀：
剧情上无跳过，米家常态，本来不应该多说什么的。结果编辑发了一下你游的那个什么优势？你游把重心放在了剧情上，叫什么“可以玩的动画番剧”。确实动画很好，在崩三原神里都能体现出来，3d的三渲二也非常强大，小表情细致入微。但是，我是说有没有一种可能，有的人他已经看过两遍剧情了呢……然后一路点点点，玩了一下午我居然还在地底。
策略深度🪢：
说实话回合制真没什么特别高深的策略，因为没什么手部操作，不像原神崩三，有什么闪避技能。本质就是叠卡养卡拉武器提技能。
游戏和原神机制近乎一模一样，方便原神玩家上手。
但其实就像我三测说的那样，我觉得回合制游戏不应该和原神这个开放世界养成成本一模一样，可以感觉好像你们有在弥补，比如公测发二十抽，升到三十五级又给很多抽。但依然不太够，虽然过剧情没有什么问题，但卡牌游戏不就是喜欢抽抽抽嘛(*꒦ິ⌓꒦ີ)（←仅我个人而言）
画面音乐🌃：
给美工磕头，满分好吧满分！
肝氪度💰：
前期异常的肝，后期应该能佛很多，因为日常任务不需要太久，熟练的话几分钟就能解决，当然是在不清体力的情况下。
因为要肝的有超长的剧情（看看b站录屏剧情就知道了，一章认真看差不多有一个小时），以及许多支线剧情。
大世界有宝箱➕解密，好像不能标点？不确定是不是我没发现。
氪金没变，和原神定价一模一样。
评价⚖️：
其实打到这里，感觉米哈游好像创新出现了瓶颈，还是说毕竟是内部工作人员搞来玩玩的，大头都在绝区零？
开服跳票，嗯……意料之中吧，怕炸服。
游戏非要我找缺点，我也只能说剧情没跳过。
非要我找优点，我会说美工文案异常强大。
绝口不提玩法。
因为真不知道怎么说，回合制的玩法已经饱和了，很多年前就饱和了，无论怎么改动它就是如此。
你们说希望手残党玩家也能玩，可以理解，但要做出自己的特色吧，不是说剧情美工的特色，而是玩法上的特色。
剧情美工最多算锦上添花，玩法才是主菜。
tap上三星的意思是「差点意思」，而我确实觉得差点意思。
大概是我对你们的期望太大了，之后落差也很大。
假设这个游戏不是米哈游出的，我可能会打个四星？也可能压根不会下，因为我不是回合制游戏的受众玩家。
</code></pre></div></div>

<p>经过提纯：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  
核心论点：评论者对崩坏星穹铁道的评价中立偏负面，主要观点如下：

1.  剧情无法跳过，虽然动画质量高，但对已经看过剧情的玩家很繁琐。
2.  策略深度有限，回合制与原神机制相似，主要靠叠卡养卡。
3.  画面音乐优秀，美工表现满分。
4.  肝氪度前期较高，后期可降低，氪金定价与原神相同。
5.  缺少玩法上的创新和特色，回合制玩法已饱和。

情绪：评论者对游戏的情绪中立偏负面，对米哈游的期望较高，但游戏未能满足其期望。

分析打分：从1分到5分（坏到好），评论者给游戏打3分，表示游戏“差点意思”。

</code></pre></div></div>

<p>简单将两个提纯的评论进行GPT分析</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  
分析：

优势：

1.  画面音乐：游戏的画面和音乐表现都被认为是优秀的，美工做得很好，给玩家带来了良好的视听体验。
2.  动画质量：游戏的动画质量高，细致入微的表现力让剧情更加生动。
3.  原神机制类似：对于原神玩家来说，崩坏星穹铁道的回合制和原神机制相似，有利于快速上手。

缺陷：

1.  缺乏创新：评论者认为游戏在玩法上缺乏创新，回合制玩法已经饱和，没有突破和特色。
2.  剧情无法跳过：游戏剧情不能跳过，对于已经看过剧情的玩家来说，会显得冗长和繁琐。
3.  社交元素不足：游戏缺乏社交元素，地图解谜和拼图游戏体验一般，可能导致一部分玩家失去兴趣。
4.  高收集成本：游戏中的收集要素耗时，对强迫症和收集党玩家不友好。
5.  策略深度有限：回合制游戏的策略深度相对较低，缺少手部操作和闪避技能等元素，可能让一些玩家感到无聊。

</code></pre></div></div>

<p>艹， 居然无比赞同。。</p>

<p>实际上其平台内部的总结机制：</p>

<p><img src="/assets/images/img/Pasted image 20230428144517.png" alt="" /></p>

<p><img src="/assets/images/img/jizi.jpg" alt="" /></p>

<h3 id="什么时候可以用">什么时候可以用？</h3>

<p>一测， 二测，非氪金的时候，节省脑力消化文字，更多精力放在思考优化</p>

<h2 id="acg游戏完全ai化小说可视化">ACG游戏完全AI化（小说可视化）</h2>

<p>文本ChatGPT + 图片 Stable Diffusion + 音频AI + 自动导入工具
哈哈， 流水化</p>

<p>。。 
需要一个不错的文案， 把握节奏
美术一个调整风格设计</p>]]></content><author><name>FrozzenCJ</name><email>joeychou0805@gmail.com</email></author><category term="Work" /><category term="Tools" /><summary type="html"><![CDATA[我能想到, 别人可能也想到, 但脑子, 嘴和手长在我身上 舆论反馈辅助决策 评分+评论： 各游戏平台，各 纯评论： 评论文章： 可结合工具： ChatGPT 4.0 + python (脚本化) 先说结论 运营上客观但价值转化率其实不够, 对策划后续设计的决定性价值不足 一测， 二测，非氪金的时候，节省脑力消化文字，更多精力放在思考优化 很多评论实际上大同小异 注重核心用户的评论和评分, 本来每个游戏就是有壁垒和独特性, 因此筛选用户也是非常重要的, 提升核心用户和潜在用户的诉求权重 问题: TapTap或者Steam 上面的评分和评论在一定程度上并不匹配, 目标用户的评论权重和非目标用户的评论权重 米の提纯： 米游社 网易の提纯： 大神 举个栗子 Tap tap上崩坏的评分+评论： 请概述以下评论核心论点，阐述其情绪，并从1分到5分（坏到好），来客观对崩坏星穹铁道进行分析打分： 我路人，没玩过原神，纯看热度准备试试。 PC端玩的，手机也下载了游戏和米游社，也就为了蚊子大点的福利，汗 玩到现在十来个小时，总体感觉一般吧。 一般在哪: 1.这游戏纯单机，后续似乎也完全没有啥社交部分的内容。唯一有个好友援助，基本毫无影响。 地图除了精致华丽，乐趣基本没有。解谜内容和那个拼图小游戏，可有可无吧 2.强迫症，收集党慎入。单说地图那些宝箱，书籍，你要是不去搜索攻略，难度倒是不太高，但真的很耗费时间。 照着攻略来，倒是方便，但依然很“麻烦”， 多少让人心累。。。 3.剧情一般，但完全不能跳过。 这意味着你要是单纯来玩游戏，单纯体验“打架”的，绝对不行。 再开个小号或者换服务器啥的，也很不行，折磨。 剧情和对话我真有好好看，但确实一般，除了文本内容，有很多致敬、恶搞、整活啥的，算是有点意思 4.数值部分，我的体验是“平滑”。没有任何爽点、也无槽点，堪称策略游戏。 (氪佬和平民玩的是两个游戏，不谈。 网游和手游，如果不卖数值，是不可能简单暴力且无脑的赚钱的。 抽卡本质上是卖数值，只不过不全是数值) ---------- 我的总体评价是: 游戏品质无需多说， 游戏类型不是传统抽卡游戏，跑图和战斗的体验，更像魂类，有点硬核。 游戏内容，看点在于文本和角色，其余负分不至于，但相比就无话可谈。 ---------- 题外话，和我玩过的游戏比较，我个人觉得像是回合制的神界原罪。 ------ 忘记说了，这游戏里不能跳，妥妥差评，三星评价扣一星吧。 经过提纯： 核心论点：评论者对崩坏星穹铁道的评价是一般，主要观点如下： 游戏缺乏社交元素，地图解谜和拼图游戏可有可无。 收集内容耗时，对强迫症和收集党不友好。 剧情一般，不能跳过，不适合只想体验战斗的玩家。 数值体验平滑，没有高潮和低谷。 情绪：评论者对游戏的情绪是中立偏负面。 分析打分：从1分到5分（坏到好），评论者给游戏打3分，主要因为游戏不能跳过。 明显并非是目标用户，分数给低了，按照同样的格式（prompt）选择其他评论： 和三测几乎一模一样，意料之中。 先给自己叠个甲，以下基于主观臆断，不一定是对的。 剧情🍀： 剧情上无跳过，米家常态，本来不应该多说什么的。结果编辑发了一下你游的那个什么优势？你游把重心放在了剧情上，叫什么“可以玩的动画番剧”。确实动画很好，在崩三原神里都能体现出来，3d的三渲二也非常强大，小表情细致入微。但是，我是说有没有一种可能，有的人他已经看过两遍剧情了呢……然后一路点点点，玩了一下午我居然还在地底。 策略深度🪢： 说实话回合制真没什么特别高深的策略，因为没什么手部操作，不像原神崩三，有什么闪避技能。本质就是叠卡养卡拉武器提技能。 游戏和原神机制近乎一模一样，方便原神玩家上手。 但其实就像我三测说的那样，我觉得回合制游戏不应该和原神这个开放世界养成成本一模一样，可以感觉好像你们有在弥补，比如公测发二十抽，升到三十五级又给很多抽。但依然不太够，虽然过剧情没有什么问题，但卡牌游戏不就是喜欢抽抽抽嘛(*꒦ິ⌓꒦ີ)（←仅我个人而言） 画面音乐🌃： 给美工磕头，满分好吧满分！ 肝氪度💰： 前期异常的肝，后期应该能佛很多，因为日常任务不需要太久，熟练的话几分钟就能解决，当然是在不清体力的情况下。 因为要肝的有超长的剧情（看看b站录屏剧情就知道了，一章认真看差不多有一个小时），以及许多支线剧情。 大世界有宝箱➕解密，好像不能标点？不确定是不是我没发现。 氪金没变，和原神定价一模一样。 评价⚖️： 其实打到这里，感觉米哈游好像创新出现了瓶颈，还是说毕竟是内部工作人员搞来玩玩的，大头都在绝区零？ 开服跳票，嗯……意料之中吧，怕炸服。 游戏非要我找缺点，我也只能说剧情没跳过。 非要我找优点，我会说美工文案异常强大。 绝口不提玩法。 因为真不知道怎么说，回合制的玩法已经饱和了，很多年前就饱和了，无论怎么改动它就是如此。 你们说希望手残党玩家也能玩，可以理解，但要做出自己的特色吧，不是说剧情美工的特色，而是玩法上的特色。 剧情美工最多算锦上添花，玩法才是主菜。 tap上三星的意思是「差点意思」，而我确实觉得差点意思。 大概是我对你们的期望太大了，之后落差也很大。 假设这个游戏不是米哈游出的，我可能会打个四星？也可能压根不会下，因为我不是回合制游戏的受众玩家。 经过提纯： 核心论点：评论者对崩坏星穹铁道的评价中立偏负面，主要观点如下： 1. 剧情无法跳过，虽然动画质量高，但对已经看过剧情的玩家很繁琐。 2. 策略深度有限，回合制与原神机制相似，主要靠叠卡养卡。 3. 画面音乐优秀，美工表现满分。 4. 肝氪度前期较高，后期可降低，氪金定价与原神相同。 5. 缺少玩法上的创新和特色，回合制玩法已饱和。 情绪：评论者对游戏的情绪中立偏负面，对米哈游的期望较高，但游戏未能满足其期望。 分析打分：从1分到5分（坏到好），评论者给游戏打3分，表示游戏“差点意思”。 简单将两个提纯的评论进行GPT分析 分析： 优势： 1. 画面音乐：游戏的画面和音乐表现都被认为是优秀的，美工做得很好，给玩家带来了良好的视听体验。 2. 动画质量：游戏的动画质量高，细致入微的表现力让剧情更加生动。 3. 原神机制类似：对于原神玩家来说，崩坏星穹铁道的回合制和原神机制相似，有利于快速上手。 缺陷： 1. 缺乏创新：评论者认为游戏在玩法上缺乏创新，回合制玩法已经饱和，没有突破和特色。 2. 剧情无法跳过：游戏剧情不能跳过，对于已经看过剧情的玩家来说，会显得冗长和繁琐。 3. 社交元素不足：游戏缺乏社交元素，地图解谜和拼图游戏体验一般，可能导致一部分玩家失去兴趣。 4. 高收集成本：游戏中的收集要素耗时，对强迫症和收集党玩家不友好。 5. 策略深度有限：回合制游戏的策略深度相对较低，缺少手部操作和闪避技能等元素，可能让一些玩家感到无聊。 艹， 居然无比赞同。。 实际上其平台内部的总结机制： 什么时候可以用？ 一测， 二测，非氪金的时候，节省脑力消化文字，更多精力放在思考优化 ACG游戏完全AI化（小说可视化） 文本ChatGPT + 图片 Stable Diffusion + 音频AI + 自动导入工具 哈哈， 流水化 。。 需要一个不错的文案， 把握节奏 美术一个调整风格设计]]></summary></entry><entry><title type="html">稳定性自测工具</title><link href="http://localhost:4000/2023/01/10/%E7%A8%B3%E5%AE%9A%E6%80%A7%E8%87%AA%E6%B5%8B%E5%B7%A5%E5%85%B7.html" rel="alternate" type="text/html" title="稳定性自测工具" /><published>2023-01-10T00:00:00+08:00</published><updated>2023-01-10T00:00:00+08:00</updated><id>http://localhost:4000/2023/01/10/%E7%A8%B3%E5%AE%9A%E6%80%A7%E8%87%AA%E6%B5%8B%E5%B7%A5%E5%85%B7</id><content type="html" xml:base="http://localhost:4000/2023/01/10/%E7%A8%B3%E5%AE%9A%E6%80%A7%E8%87%AA%E6%B5%8B%E5%B7%A5%E5%85%B7.html"><![CDATA[<h2 id="项目简记">项目简记</h2>

<p>使用项目：《明日之后》</p>

<p>2022年8月 - 2022年11月</p>

<p>内容：
    python2.7 开发， 仿照 开发环境稳定性保障方案 提供 trunk 和 future 稳定客户端和服务器. 主要为策划,美术,QA提供可供登录和使用开发\测试环境</p>

<p>已完成功能（按流程）：</p>
<ol>
  <li>自动更新静默检测,</li>
  <li>服务端重启超时检测</li>
  <li>客户端crash检测,</li>
  <li>tb记录功能,</li>
  <li>345中异常回退</li>
  <li>可部署拓展自动化测试脚本,</li>
  <li>相关异常可通知程序修复，</li>
  <li>Jenkins远程控制</li>
  <li>定时清理</li>
</ol>

<h2 id="解决问题">解决问题</h2>

<p>提供一个稳定的开发和测试环境，目前已为大部分非本地服提供稳定环境</p>

<p>相当于跑了一个冒烟测试的流程，主要完成客</p>

<p>记录的一个结果：</p>

<p>稳定版本结果: 服务端重启超时，发现tb 详细记录 2022.11.9  14:06:28 发现问题， 14:13:20 策划提出 14:31:42 修复 1h</p>

<h2 id="实际方案">实际方案</h2>

<h3 id="设计方案">设计方案</h3>

<p><img src="/assets/images/img/SVN_Version_control-Overview.drawio.png" alt="" /></p>

<h3 id="流程图">流程图</h3>

<h4 id="初始版本">初始版本</h4>

<p><img src="/assets/images/img/SVN_Version_control-Version1.0.drawio.png" alt="" /></p>

<h4 id="当前运行版本">当前运行版本</h4>

<p><img src="/assets/images/img/SVN_Version_control-Version2.0.drawio.png" alt="" /></p>

<h4 id="开发中版本">开发中版本</h4>

<blockquote>
  <p>由于实际所有跑测内容都是在测试机本地， 无法作用于其他服务器，所以需要增加一个内服容器，用于跑测实际服务器</p>
</blockquote>

<p><img src="/assets/images/img/SVN_Version_control-Version3.0(Next).drawio.png" alt="" /></p>

<h3 id="开发记录部分">开发记录（部分）</h3>

<p>需求：</p>

<p>1.增加服务端稳定版（完成）</p>

<p>2.增加冒烟测试的时间检测（初步完成，待优化）</p>

<p>3.优化记录方案（自行斟酌）</p>

<p>开发记录：</p>

<p>10.27</p>

<p>稳定版添加服务端及相关功能梳理 (1h)</p>

<p>开发计划梳理(0.5h)</p>

<p>李洲沟通+测试内服容器 独享代码 功能(0.5h)</p>

<p>10.28</p>

<p>问题：内服服务器回退异常 （程序发现软链无法回退，除非修改jenkins配置，但是会影响其他服务器）</p>

<p>最终分析结果如下：(2h)</p>

<p>1. 使用内服容器   需要完成 群消息转发(读取+转发), 测试机消息处理(简易服务器)  李洲需解决: 内服服务器回退问题(需到com文件夹中回退), 但是会影响其他服务器</p>

<p>2. 使用本地服     需配置future本地服和trunk本地服, 本地消息处理(无需服务器) 绝对错峰启动, 本地服的服务端启动失败也是可以检测到的.  这个是李洲推荐的做法</p>

<p>解决方案：使用本地服配置，先尝试使用future的本地服 ，由于部分无权限，进行拉取配置，部分来自future，部分来自qa/server（1h）</p>

<p>10.31</p>

<p>future 新版本开发 (8h)</p>

<p>将原有流程拆分为handle_server和handle_trunk，原有模块 checkupdate, run_script等模块继承子类，新增LogMonitoring模块用于监控本地服运行状态。</p>

<p>11.1</p>

<p>future 新版本开发 (4h)</p>

<p>调整main主流程，分为do_server流程和do_client流程 （增加error, timeout, success 三种状态和对应的处理方案）</p>

<p>解决本地服无法关闭问题 （4h）</p>

<p>11.2</p>

<p>future 稳定版运行测试+一些小bug解决（3h）</p>

<p>调整blameduty和handle的部分逻辑，对应上述流程的通知和记录方案 (2h)</p>

<p>11.3</p>

<p>future 内服347重启失败原因查询 （2h）</p>

<p>trunk 相关配置+部署+测试（完成）（5h）</p>

<p>出现新问题: trunk和future如果同时运行时，本地服冲突（占用端口+本地服关闭问题）</p>

<p>思考/测试 最终解决方案（略写）（1h）</p>

<p>将两分合为一套，每半小时分模式运行。 模式设计方案为 运行前模式类读取对应模式配置。</p>

<p>11.4 </p>

<p>最终解决方案完成， 测试+部署 （6h）</p>

<p>11.5</p>

<p>调整细节+将future的客户端引擎改为 dev 并测试 (1.5h)</p>

<p>11.7</p>

<p>稳定 2.5</p>

<p>加一重判断 客户端没登上去也算timeout  </p>

<p>三方阅读+开会 1.5</p>

<p>策划统计(设计qt+echart，svn读取，处理数据) 5</p>

<p>11.8</p>

<p>15min左右吧， 如果出现服务端问题， jenkins那边的重启超时阈值是 7min42s，</p>

<p>目前我考虑服务端问题有2种：</p>

<p>服务端没有启动成功的 Login， 360s，</p>

<p>客户端无法成功登录/telnet, 各300s </p>

<p>理论上是线性的，取最长360s即可，再加上删掉点runscript，应该可以控制在15min左右</p>

<p>然后加个svn版本检查，这样没有新内容就不要继续跑了，避免刷屏 </p>

<p>trunk和future的间隔控制在3min左右用来处理残留客户端和服务端关闭和回退svn</p>

<p>根据更新后start.bat调整本地服配置 0.5h</p>

<p>内服 stable_branch 问题 2h</p>

<p>bindict 问题 1h</p>

<p>11.9 </p>

<p>稳定版本结果: 服务端重启超时，发现tb 详细记录 2022.11.9  14:06:28 发现问题， 14:13:20 策划提出 14:31:42 修复 1h</p>

<p>稳定版解决 wc.db 异常, 导致一直卡死 问题  3h</p>

<p>trunk 服务端， sqlite3工具， 客户端 script 重新拉</p>

<p>1. svn: E200030: sqlite[S11]: database disk image is malformed</p>

<p>.svn 同级目录下 放sqlite3.exe</p>

<p>cmd</p>

<p>sqlite3.exe .svn/wc.db “reindex nodes”</p>

<p>sqlite3.exe app/.svn/wc.db “reindex pristine”</p>

<p>有时候不好使</p>

<p>复制别的 wc.db 可以使用 基本上可以解决</p>

<p>如果都无法解决，删除重新拉一个</p>

<p>错误情况2：svn报错：“Previous operation has not finished; run ‘cleanup’ if it was interrupted“ 的解决方法：（整理所得）<a href="https://blog.csdn.net/qq_16769857/article/details/52149285">https://blog.csdn.net/qq_16769857/article/details/52149285</a></p>

<p>解决方法：清空svn的队列</p>

<p>内嵌数据库一般是用sqlite进行轻量级管理的。网上可以下到sqlite3.exe(点击下载)2. 找到你项目的.svn文件，查看是否存在wc.db3. 为了方便命令行执行，将sqlite3.exe放到svn 项目的主目录下，和.svn目录同级下。找到本地存放svn项目的目录，将sqlite3.exe复制到该项目根目录下（与.svn目录同级）可能.svn在项目中这个文件被隐藏了，直接复制进svn项目即可。</p>

<p>启动cmd执行sqlite3 .svn/wc.db “select * from work_queue” 可能会看到很多记录</p>

<p>执行 sqlite3 .svn/wc.db “delete from work_queue”. 把队列清空。</p>

<p>执行 sqlite3 .svn/wc.db “select * from work_queue”. 确认一下是否已经清空队列，发现已经没有记录显示，说明已经清空了。7. 最后再试一下，看是否可以 clean up了。果然成功了。</p>

<p>策划svn提交版本统计工具 4h</p>

<h2 id="最终结果">最终结果</h2>

<p>运行至今，持续维护和添加功能，其中避免非工作日前的BUG导致服务器无法正常运行3次，大大提高了策划，美术和QA的工作效率，减少了人力成本(人天*影响人数)，提高了工作效率。</p>]]></content><author><name>FrozzenCJ</name><email>joeychou0805@gmail.com</email></author><category term="Work" /><category term="Tools" /><summary type="html"><![CDATA[项目简记 使用项目：《明日之后》 2022年8月 - 2022年11月 内容： python2.7 开发， 仿照 开发环境稳定性保障方案 提供 trunk 和 future 稳定客户端和服务器. 主要为策划,美术,QA提供可供登录和使用开发\测试环境 已完成功能（按流程）： 自动更新静默检测, 服务端重启超时检测 客户端crash检测, tb记录功能, 345中异常回退 可部署拓展自动化测试脚本, 相关异常可通知程序修复， Jenkins远程控制 定时清理 解决问题 提供一个稳定的开发和测试环境，目前已为大部分非本地服提供稳定环境 相当于跑了一个冒烟测试的流程，主要完成客 记录的一个结果： 稳定版本结果: 服务端重启超时，发现tb 详细记录 2022.11.9  14:06:28 发现问题， 14:13:20 策划提出 14:31:42 修复 1h 实际方案 设计方案 流程图 初始版本 当前运行版本 开发中版本 由于实际所有跑测内容都是在测试机本地， 无法作用于其他服务器，所以需要增加一个内服容器，用于跑测实际服务器 开发记录（部分） 需求： 1.增加服务端稳定版（完成） 2.增加冒烟测试的时间检测（初步完成，待优化） 3.优化记录方案（自行斟酌） 开发记录： 10.27 稳定版添加服务端及相关功能梳理 (1h) 开发计划梳理(0.5h) 李洲沟通+测试内服容器 独享代码 功能(0.5h) 10.28 问题：内服服务器回退异常 （程序发现软链无法回退，除非修改jenkins配置，但是会影响其他服务器） 最终分析结果如下：(2h) 1. 使用内服容器   需要完成 群消息转发(读取+转发), 测试机消息处理(简易服务器)  李洲需解决: 内服服务器回退问题(需到com文件夹中回退), 但是会影响其他服务器 2. 使用本地服     需配置future本地服和trunk本地服, 本地消息处理(无需服务器) 绝对错峰启动, 本地服的服务端启动失败也是可以检测到的.  这个是李洲推荐的做法 解决方案：使用本地服配置，先尝试使用future的本地服 ，由于部分无权限，进行拉取配置，部分来自future，部分来自qa/server（1h） 10.31 future 新版本开发 (8h) 将原有流程拆分为handle_server和handle_trunk，原有模块 checkupdate, run_script等模块继承子类，新增LogMonitoring模块用于监控本地服运行状态。 11.1 future 新版本开发 (4h) 调整main主流程，分为do_server流程和do_client流程 （增加error, timeout, success 三种状态和对应的处理方案） 解决本地服无法关闭问题 （4h） 11.2 future 稳定版运行测试+一些小bug解决（3h） 调整blameduty和handle的部分逻辑，对应上述流程的通知和记录方案 (2h) 11.3 future 内服347重启失败原因查询 （2h） trunk 相关配置+部署+测试（完成）（5h） 出现新问题: trunk和future如果同时运行时，本地服冲突（占用端口+本地服关闭问题） 思考/测试 最终解决方案（略写）（1h） 将两分合为一套，每半小时分模式运行。 模式设计方案为 运行前模式类读取对应模式配置。 11.4  最终解决方案完成， 测试+部署 （6h） 11.5 调整细节+将future的客户端引擎改为 dev 并测试 (1.5h) 11.7 稳定 2.5 加一重判断 客户端没登上去也算timeout   三方阅读+开会 1.5 策划统计(设计qt+echart，svn读取，处理数据) 5 11.8 15min左右吧， 如果出现服务端问题， jenkins那边的重启超时阈值是 7min42s， 目前我考虑服务端问题有2种： 服务端没有启动成功的 Login， 360s， 客户端无法成功登录/telnet, 各300s  理论上是线性的，取最长360s即可，再加上删掉点runscript，应该可以控制在15min左右 然后加个svn版本检查，这样没有新内容就不要继续跑了，避免刷屏  trunk和future的间隔控制在3min左右用来处理残留客户端和服务端关闭和回退svn 根据更新后start.bat调整本地服配置 0.5h 内服 stable_branch 问题 2h bindict 问题 1h 11.9  稳定版本结果: 服务端重启超时，发现tb 详细记录 2022.11.9  14:06:28 发现问题， 14:13:20 策划提出 14:31:42 修复 1h 稳定版解决 wc.db 异常, 导致一直卡死 问题  3h trunk 服务端， sqlite3工具， 客户端 script 重新拉 1. svn: E200030: sqlite[S11]: database disk image is malformed .svn 同级目录下 放sqlite3.exe cmd sqlite3.exe .svn/wc.db “reindex nodes” sqlite3.exe app/.svn/wc.db “reindex pristine” 有时候不好使 复制别的 wc.db 可以使用 基本上可以解决 如果都无法解决，删除重新拉一个 错误情况2：svn报错：“Previous operation has not finished; run ‘cleanup’ if it was interrupted“ 的解决方法：（整理所得）https://blog.csdn.net/qq_16769857/article/details/52149285 解决方法：清空svn的队列 内嵌数据库一般是用sqlite进行轻量级管理的。网上可以下到sqlite3.exe(点击下载)2. 找到你项目的.svn文件，查看是否存在wc.db3. 为了方便命令行执行，将sqlite3.exe放到svn 项目的主目录下，和.svn目录同级下。找到本地存放svn项目的目录，将sqlite3.exe复制到该项目根目录下（与.svn目录同级）可能.svn在项目中这个文件被隐藏了，直接复制进svn项目即可。 启动cmd执行sqlite3 .svn/wc.db “select * from work_queue” 可能会看到很多记录 执行 sqlite3 .svn/wc.db “delete from work_queue”. 把队列清空。 执行 sqlite3 .svn/wc.db “select * from work_queue”. 确认一下是否已经清空队列，发现已经没有记录显示，说明已经清空了。7. 最后再试一下，看是否可以 clean up了。果然成功了。 策划svn提交版本统计工具 4h 最终结果 运行至今，持续维护和添加功能，其中避免非工作日前的BUG导致服务器无法正常运行3次，大大提高了策划，美术和QA的工作效率，减少了人力成本(人天*影响人数)，提高了工作效率。]]></summary></entry></feed>